
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Codex API Documentation</title>
    <link rel="icon" type="image/png" href="images/favicon.png" />

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
    <link href="stylesheets/codex.css" rel="stylesheet" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#api-urls" class="toc-h2 toc-link" data-title="API URLs">API URLs</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#registering-an-application" class="toc-h2 toc-link" data-title="Registering an Application">Registering an Application</a>
                  </li>
                  <li>
                    <a href="#access-tokens" class="toc-h2 toc-link" data-title="Access Tokens">Access Tokens</a>
                  </li>
                  <li>
                    <a href="#making-authenticated-requests" class="toc-h2 toc-link" data-title="Making Authenticated Requests">Making Authenticated Requests</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#public-routes" class="toc-h1 toc-link" data-title="Public Routes">Public Routes</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-an-access-token" class="toc-h2 toc-link" data-title="Get an Access Token">Get an Access Token</a>
                  </li>
                  <li>
                    <a href="#get-a-codex-record" class="toc-h2 toc-link" data-title="Get a Codex Record">Get a Codex Record</a>
                  </li>
                  <li>
                    <a href="#get-a-codex-record-39-s-metadata-only" class="toc-h2 toc-link" data-title="Get a Codex Record's Metadata Only">Get a Codex Record's Metadata Only</a>
                  </li>
                  <li>
                    <a href="#get-a-codex-record-39-s-provenance-only" class="toc-h2 toc-link" data-title="Get a Codex Record's Provenance Only">Get a Codex Record's Provenance Only</a>
                  </li>
                  <li>
                    <a href="#get-a-codex-record-39-s-main-image-only" class="toc-h2 toc-link" data-title="Get a Codex Record's Main Image Only">Get a Codex Record's Main Image Only</a>
                  </li>
                  <li>
                    <a href="#get-a-codex-record-39-s-images-only" class="toc-h2 toc-link" data-title="Get a Codex Record's Images Only">Get a Codex Record's Images Only</a>
                  </li>
                  <li>
                    <a href="#get-a-codex-record-39-s-files-only" class="toc-h2 toc-link" data-title="Get a Codex Record's Files Only">Get a Codex Record's Files Only</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#client-routes" class="toc-h1 toc-link" data-title="Client Routes">Client Routes</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-client" class="toc-h2 toc-link" data-title="Get Client">Get Client</a>
                  </li>
                  <li>
                    <a href="#get-all-codex-records" class="toc-h2 toc-link" data-title="Get All Codex Records">Get All Codex Records</a>
                  </li>
                  <li>
                    <a href="#create-a-codex-record" class="toc-h2 toc-link" data-title="Create a Codex Record">Create a Codex Record</a>
                  </li>
                  <li>
                    <a href="#modify-a-codex-record" class="toc-h2 toc-link" data-title="Modify a Codex Record">Modify a Codex Record</a>
                  </li>
                  <li>
                    <a href="#modify-a-codex-record-39-s-metadata" class="toc-h2 toc-link" data-title="Modify a Codex Record's Metadata">Modify a Codex Record's Metadata</a>
                  </li>
                  <li>
                    <a href="#start-a-transfer" class="toc-h2 toc-link" data-title="Start a Transfer">Start a Transfer</a>
                  </li>
                  <li>
                    <a href="#cancel-a-transfer" class="toc-h2 toc-link" data-title="Cancel a Transfer">Cancel a Transfer</a>
                  </li>
                  <li>
                    <a href="#accept-a-transfer" class="toc-h2 toc-link" data-title="Accept a Transfer">Accept a Transfer</a>
                  </li>
                  <li>
                    <a href="#ignore-a-transfer" class="toc-h2 toc-link" data-title="Ignore a Transfer">Ignore a Transfer</a>
                  </li>
                  <li>
                    <a href="#get-outgoing-transfers" class="toc-h2 toc-link" data-title="Get Outgoing Transfers">Get Outgoing Transfers</a>
                  </li>
                  <li>
                    <a href="#get-incoming-transfers" class="toc-h2 toc-link" data-title="Get Incoming Transfers">Get Incoming Transfers</a>
                  </li>
                  <li>
                    <a href="#get-a-codex-record-39-s-whitelisted-addresses" class="toc-h2 toc-link" data-title="Get a Codex Record's Whitelisted Addresses">Get a Codex Record's Whitelisted Addresses</a>
                  </li>
                  <li>
                    <a href="#add-an-address-to-a-codex-record-39-s-whitelisted-addresses" class="toc-h2 toc-link" data-title="Add an Address to a Codex Record's Whitelisted Addresses">Add an Address to a Codex Record's Whitelisted Addresses</a>
                  </li>
                  <li>
                    <a href="#remove-an-address-from-a-codex-record-39-s-whitelisted-addresses" class="toc-h2 toc-link" data-title="Remove an Address from a Codex Record's Whitelisted Addresses">Remove an Address from a Codex Record's Whitelisted Addresses</a>
                  </li>
                  <li>
                    <a href="#entirely-replace-a-codex-record-39-s-whitelisted-addresses" class="toc-h2 toc-link" data-title="Entirely Replace a Codex Record's Whitelisted Addresses">Entirely Replace a Codex Record's Whitelisted Addresses</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#general-concepts" class="toc-h1 toc-link" data-title="General Concepts">General Concepts</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#api-requests" class="toc-h2 toc-link" data-title="API Requests">API Requests</a>
                  </li>
                  <li>
                    <a href="#webhooks" class="toc-h2 toc-link" data-title="Webhooks">Webhooks</a>
                  </li>
                  <li>
                    <a href="#gas-allowance" class="toc-h2 toc-link" data-title="Gas Allowance">Gas Allowance</a>
                  </li>
                  <li>
                    <a href="#privacy" class="toc-h2 toc-link" data-title="Privacy">Privacy</a>
                  </li>
                  <li>
                    <a href="#historical-provenance" class="toc-h2 toc-link" data-title="Historical Provenance">Historical Provenance</a>
                  </li>
                  <li>
                    <a href="#transferring-codex-records" class="toc-h2 toc-link" data-title="Transferring Codex Records">Transferring Codex Records</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#response-examples" class="toc-h1 toc-link" data-title="Response Examples">Response Examples</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#client" class="toc-h2 toc-link" data-title="Client">Client</a>
                  </li>
                  <li>
                    <a href="#oauth2-access-token" class="toc-h2 toc-link" data-title="OAuth2 Access Token">OAuth2 Access Token</a>
                  </li>
                  <li>
                    <a href="#codex-record" class="toc-h2 toc-link" data-title="Codex Record">Codex Record</a>
                  </li>
                  <li>
                    <a href="#metadata" class="toc-h2 toc-link" data-title="Metadata">Metadata</a>
                  </li>
                  <li>
                    <a href="#pending-update" class="toc-h2 toc-link" data-title="Pending Update">Pending Update</a>
                  </li>
                  <li>
                    <a href="#provenance-event" class="toc-h2 toc-link" data-title="Provenance Event">Provenance Event</a>
                  </li>
                  <li>
                    <a href="#metadata-provider" class="toc-h2 toc-link" data-title="Metadata Provider">Metadata Provider</a>
                  </li>
                  <li>
                    <a href="#file" class="toc-h2 toc-link" data-title="File">File</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
          <li>
            <a href="#blockchain-details" class="toc-h1 toc-link" data-title="Blockchain Details">Blockchain Details</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#smart-contract-addresses" class="toc-h2 toc-link" data-title="Smart Contract Addresses">Smart Contract Addresses</a>
                  </li>
                  <li>
                    <a href="#get-erc-721-token-metadata" class="toc-h2 toc-link" data-title="Get ERC-721 Token Metadata">Get ERC-721 Token Metadata</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href="https://www.codexprotocol.com">Codex Protocol</a></li>
            <li><a href="https://codex-viewer.com">Codex Viewer</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to The Codex API documentation! Among other things, you can use our API
to create Codex Records on the Ethereum Blockchain without the need for any
direct blockchain interaction.</p>

<p>To use The Codex API, you will need to register an OAuth2 application with us.
See <a href="#authentication">Authentication</a> for more information.</p>

<p>If you have any questions or suggestions for edits to this documentation, please
visit the <a href="https://github.com/codex-protocol/site.dev-codexprotocol-com">GitHub</a>
repository and open an <a href="https://github.com/codex-protocol/site.dev-codexprotocol-com/issues">issue</a>
and/or <a href="https://github.com/codex-protocol/site.dev-codexprotocol-com/pulls">pull request.</a></p>

<aside class="notice">
  For the sake of brevity, all JavaScript code examples in this documentation
  assume the use of a convenient HTTP request library (e.g.
  <a href="https://www.npmjs.com/package/request" rel="noopener noreferrer">request</a>).
  Of course, you're free to make requests to The Codex API in any manner you see
  fit.
</aside>
<h2 id='api-urls'>API URLs</h2>
<p>The Codex API is available in 3 environments that correspond to 3 different
Ethereum networks, so the API URL will vary based on the environment you are
developing against.</p>

<table><thead>
<tr>
<th>Environment</th>
<th>Network</th>
<th>URL</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Development</td>
<td>Ropsten</td>
<td><a href="http://ropsten-api.codexprotocol.com">http://ropsten-api.codexprotocol.com</a></td>
<td>We frequently deploy (possibly breaking) changes here. It is not recommended to develop your application against this network unless you are looking to test the latest changes to the Codex Protocol.</td>
</tr>
<tr>
<td>Staging</td>
<td>Rinkeby</td>
<td><a href="https://rinkeby-api.codexprotocol.com">https://rinkeby-api.codexprotocol.com</a></td>
<td>We only deploy stable builds here, prior to Mainnet. This is the recommended network to test your application before deploying to production.</td>
</tr>
<tr>
<td>Production</td>
<td>Mainnet</td>
<td><a href="https://api.codexprotocol.com">https://api.codexprotocol.com</a></td>
<td>Changes only get deployed here after being validated in our development and staging environments. All Codex Records created here are immutably recorded on the blockchain and cannot be destroyed. Integration into Mainnet should only be done after ensuring your application runs smoothly in the staging environment.</td>
</tr>
</tbody></table>

<aside class="success">
  All code examples in this documentation use the Rinkeby API URL, since that is
  the recommended network to develop against.
</aside>

<aside class="warning">
  Note the <code>http</code> instead of <code>https</code> for Ropsten.
</aside>
<h1 id='authentication'>Authentication</h1><h2 id='registering-an-application'>Registering an Application</h2>
<p>Currently there is no admin interface built out for application developers, so
the process for registering an application requires manual steps from both
Codex and the application developer. Additionally, we only support the
<code>client_credentials</code> grant, which means that calls to The Codex API
<strong>must</strong> be from a confidential client. A confidential client is an
application that can protect secrets from public users (i.e. calls to The Codex
API should be happening on a server application and not from within the browser.)</p>

<p>To register an application, <a href="mailto:developers@codexprotocol.com?subject=Codex%20API%20Application%20Request&amp;body=Please%20provide%20a%20brief%20description%20of%20your%20application.">send us an email</a> with the following information:</p>

<table><thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>The name of the application. This will be shown in the Codex Viewer as a registered application, taking the place of your application&#39;s Ethereum address in the Codex Record’s provenance.</td>
</tr>
<tr>
<td>email</td>
<td>The application developer’s email address. This will be used to communicate any breaking API changes or development updates.</td>
</tr>
<tr>
<td>webhookUrl</td>
<td>For example, <code>https://your-api.example.com/codex-webhook</code>. Since blockchain transactions are asynchronous, this <code>webhookUrl</code> will be used to inform your application that an event has occurred, for example when your Codex Records have been created. See <a href="#webhooks">webhooks</a> for details.</td>
</tr>
</tbody></table>
<h2 id='access-tokens'>Access Tokens</h2><h3 id='obtaining-an-access-token'>Obtaining an Access Token</h3>
<p>Before you can make API calls, you&#39;ll need an access token. See
<a href="#get-an-access-token">Get an Access Token</a> for more details.</p>
<h3 id='access-token-expiration'>Access Token Expiration</h3>
<blockquote>
<p>Example response when an expired access token is provided:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"error"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"code"</span><span class="p">:</span> <span class="mi">401</span><span class="p">,</span>
    <span class="s2">"message"</span><span class="p">:</span> <span class="s2">"Invalid token: access token is invalid"</span>
  <span class="p">},</span>
  <span class="s2">"result"</span><span class="p">:</span> <span class="kc">null</span>
<span class="p">}</span>
</code></pre>
<p>For security purposes, access tokens will expire after a certain period of time.
If you send a request and and receive a <a href="#errors">401 Unauthorized</a> error,
you&#39;ll need to <a href="#get-an-access-token">generate another access token</a> and send
the request again.</p>

<p>The following table shows the access token expiries for each environment:</p>

<table><thead>
<tr>
<th>Network</th>
<th>Expiry</th>
</tr>
</thead><tbody>
<tr>
<td>Ropsten</td>
<td>30 days after creation</td>
</tr>
<tr>
<td>Rinkeby</td>
<td>90 days after creation</td>
</tr>
<tr>
<td>Mainnet</td>
<td>90 days after creation</td>
</tr>
</tbody></table>

<aside class="success">
  It's a good idea to simply request a new access token periodically, before
  your current access token is set to expire. Be sure to destroy your existing
  access token after requesting a new one to minimize the potential for
  malicious use.
</aside>
<h2 id='making-authenticated-requests'>Making Authenticated Requests</h2>
<blockquote>
<p>Making an authenticated API call:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="c1">// retrieve a list of your application's Codex Records</span>
<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/client/records'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'get'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer d49694e5a3459759cc7ac1741de246e184e51d6e'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// an array of Codex Records</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>Remember to replace the example <code>accessToken</code> with your personal <code>accessToken</code>.</p>
</blockquote>

<p>The Codex API expects an OAuth2 access token to be included with all requests
made to the server in the Authorization header as follows:</p>

<p><code>Authorization: Bearer d49694e5a3459759cc7ac1741de246e184e51d6e</code></p>
<h1 id='public-routes'>Public Routes</h1>
<p>Unlike <a href="#client-routes">client routes</a>, public routes do not require an
<code>accessToken</code> in the Authorization header. However, sometimes an <code>accessToken</code>
is required to retrieve a full response.</p>

<p>For example, to retrieve public information about a Codex Record, you could call
<code>GET /v1/record/:tokenId</code> without an <code>accessToken</code>. If the Codex Record is
public, then you will receive a full response. However, if the Codex Record is
private, calling this route without an <code>accessToken</code> (or an <code>accessToken</code> that
doesn&#39;t belong to the owner of the Codex Record) will return a response with all
private information removed (i.e. no <code>metadata</code>).</p>

<p>Similarly, you will not be able to call public routes such as <code>GET /v1/record/:tokenId/metadata</code>
if the record is private and the <code>accessToken</code> is missing (or if you provide
your <code>accessToken</code> but you are not the owner.)</p>

<aside class="success">
  It's generally a good idea to just <em>always</em> include an
  <a href="#access-tokens">Access Token</a> with every API request.
</aside>
<h2 id='get-an-access-token'>Get an Access Token</h2>
<p>This endpoint can be used to generate an access token, which is required for
<a href="#making-authenticated-requests">making authenticated requests</a>.</p>

<aside class="warning">
  When requesting access tokens, you <em>must</em> send the request as
  <code>Content-Type: application/x-www-form-urlencoded</code>. This is required
  by the <a href="https://tools.ietf.org/html/rfc6749?#section-4.1.3" rel="noopener noreferrer">OAuth2 Specification</a>.
</aside>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/oauth2/token'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'post'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="c1">// by using "form" here instead of "body", request will send this request as</span>
  <span class="c1">//  application/x-www-form-urlencoded</span>
  <span class="na">form</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">grant_type</span><span class="p">:</span> <span class="s1">'client_credentials'</span><span class="p">,</span>
    <span class="na">client_id</span><span class="p">:</span> <span class="s1">'5bae56e05d7971becf854a70'</span><span class="p">,</span>
    <span class="na">client_secret</span><span class="p">:</span> <span class="s1">'352db118-b76c-4c60-9ed8-aa13cb4621b8'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">.</span><span class="nx">accessToken</span><span class="p">)</span> <span class="c1">// also available is</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns an <a href="#oauth2-access-token">OAuth2 Access Token</a>.</p>

<p>Remember to replace the example <code>client_id</code> and <code>client_secret</code> with your application&#39;s <code>client_id</code> and <code>client_secret</code>.</p>
</blockquote>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /v1/oauth2/token</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>client_id</td>
<td>String</td>
<td>The unique identifier for your application, provided by Codex.</td>
</tr>
<tr>
<td>grant_type</td>
<td>String</td>
<td>Must be <code>client_credentials</code>.</td>
</tr>
<tr>
<td>client_secret</td>
<td>String</td>
<td>Your application&#39;s secret, provided by Codex.</td>
</tr>
</tbody></table>

<aside class="notice">
  This route has <code>snake_case</code> parameters, as required by the
  <a href="https://tools.ietf.org/html/rfc6749?#section-4.1.3" rel="noopener noreferrer">OAuth2 Specification</a>.
  This is the only route with <code>snake_case</code> parameters, all other
  routes have <code>camelCase</code> parameters.
</aside>
<h2 id='get-a-codex-record'>Get a Codex Record</h2>
<p>This endpoint can be used to retrieve a specific Codex Record. This will return
a full <a href="#codex-record">Codex Record</a> document, including it&#39;s
<a href="#metadata">metadata</a> and <a href="#provenance-event">provenance</a>.</p>

<aside class="warning">
  If the Codex Record is private, certain fields (e.g. <code>metadata</code>)
  will be <code>undefined</code>. Additionally, some fields may be
  <code>undefined</code> if you are not the owner of the Codex Record. See the
  <a href="#codex-record">Codex Record</a> description for details.
</aside>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/records/0'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'get'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// Codex Record with tokenId 0</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns a single <a href="#codex-record">Codex Record</a>.</p>
</blockquote>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /v1/records/:tokenId</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tokenId</td>
<td>Number</td>
<td>The <code>tokenId</code> of the Codex Record to retrieve.</td>
</tr>
</tbody></table>
<h2 id='get-a-codex-record-39-s-metadata-only'>Get a Codex Record&#39;s Metadata Only</h2>
<p>This endpoint can be used to retrieve <em>only</em> the <a href="#metadata">metadata</a> of a
specific Codex Record. This is useful if you do not need the entire Codex Record
document.</p>

<aside class="warning">
  This route will return <code>null</code> if the Codex Record is private,
  unless you are the owner or a whitelisted address. See
  <a href="#privacy">Privacy</a> for details.
</aside>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/records/0/metadata'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'get'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// the metadata of Codex Record with tokenId 0</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns a Codex Record&#39;s <a href="#metadata">metadata</a>.</p>
</blockquote>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET /v1/records/:tokenId/metadata</code></p>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tokenId</td>
<td>Number</td>
<td>The <code>tokenId</code> of the Codex Record for which to retrieve the metadata of.</td>
</tr>
</tbody></table>
<h2 id='get-a-codex-record-39-s-provenance-only'>Get a Codex Record&#39;s Provenance Only</h2>
<p>This endpoint can be used to retrieve <em>only</em> the <a href="#provenance-event">provenance</a>
of a specific Codex Record. This is useful if you do not need the entire Codex
Record document.</p>

<aside class="notice">
  This route always returns an array, because "provenance" is really a list of
  events.
</aside>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/records/0/provenance'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'get'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="c1">// sort by date created in reverse</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">order</span><span class="p">:</span> <span class="s1">'-createdAt'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// the provenance of Codex Record with tokenId 0</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns a Codex Record&#39;s <a href="#provenance-event">provenance</a>.</p>
</blockquote>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>GET /v1/records/:tokenId/provenance</code></p>
<h3 id='url-parameters-3'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tokenId</td>
<td>Number</td>
<td>The <code>tokenId</code> of the Codex Record for which to retrieve the provenance of.</td>
</tr>
</tbody></table>
<h3 id='request-parameters-2'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>order</td>
<td>String</td>
<td>createdAt</td>
<td>To sort in reverse order, specify this value as <code>-createdAt</code>.</td>
</tr>
</tbody></table>
<h2 id='get-a-codex-record-39-s-main-image-only'>Get a Codex Record&#39;s Main Image Only</h2>
<p>This endpoint can be used to retrieve <em>only</em> the main image for a specific Codex
Record. This is useful if you do not need the entire Codex Record document.</p>

<aside class="warning">
  This route will return <code>null</code> if the Codex Record is private,
  unless you are the owner or a whitelisted address. See
  <a href="#privacy">Privacy</a> for details.
</aside>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/records/0/main-image'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'get'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="c1">// sort by date created in reverse</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">order</span><span class="p">:</span> <span class="s1">'-createdAt'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// the mainImage of Codex Record with tokenId 0</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns a single <a href="#file">File</a>.</p>
</blockquote>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>GET /v1/records/:tokenId/main-image</code></p>
<h3 id='url-parameters-4'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tokenId</td>
<td>Number</td>
<td>The <code>tokenId</code> of the Codex Record for which to retrieve the main image of.</td>
</tr>
</tbody></table>
<h2 id='get-a-codex-record-39-s-images-only'>Get a Codex Record&#39;s Images Only</h2>
<p>This endpoint can be used to retrieve <em>only</em> the <code>images</code> array for a specific
Codex Record. This is useful if you do not need the entire Codex Record document.</p>

<aside class="warning">
  This route will return <code>null</code> if the Codex Record is private,
  unless you are the owner or a whitelisted address. See
  <a href="#privacy">Privacy</a> for details.
</aside>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/records/0/images'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'get'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="c1">// sort by date created in reverse</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">order</span><span class="p">:</span> <span class="s1">'-createdAt'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// the images array of Codex Record with tokenId 0</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns an array of <a href="#file">Files</a>.</p>
</blockquote>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>GET /v1/records/:tokenId/images</code></p>
<h3 id='url-parameters-5'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tokenId</td>
<td>Number</td>
<td>The <code>tokenId</code> of the Codex Record for which to retrieve the images array of.</td>
</tr>
</tbody></table>
<h2 id='get-a-codex-record-39-s-files-only'>Get a Codex Record&#39;s Files Only</h2>
<p>This endpoint can be used to retrieve <em>only</em> the <code>files</code> array for a specific
Codex Record. This is useful if you do not need the entire Codex Record document.</p>

<aside class="warning">
  This route will return <code>null</code> if the Codex Record is private,
  unless you are the owner or a whitelisted address. See
  <a href="#privacy">Privacy</a> for details.
</aside>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/records/0/files'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'get'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="c1">// sort by date created in reverse</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">order</span><span class="p">:</span> <span class="s1">'-createdAt'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// the files array of Codex Record with tokenId 0</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns an array of <a href="#file">Files</a>.</p>
</blockquote>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>GET /v1/records/:tokenId/files</code></p>
<h3 id='url-parameters-6'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tokenId</td>
<td>Number</td>
<td>The <code>tokenId</code> of the Codex Record for which to retrieve the files array of.</td>
</tr>
</tbody></table>
<h1 id='client-routes'>Client Routes</h1>
<p>Unlike <a href="#public-routes">public routes</a>, client routes are all prefixed with
<code>/v1/client</code> and only perform actions on data owned by your application. All
client routes require an <code>accessToken</code> in the Authorization header, as described
in the <a href="#access-tokens">Access Tokens</a> section.</p>

<aside class="success">
  All requests to client routes require an <a href="#access-tokens">Access Token</a>.
</aside>
<h2 id='get-client'>Get Client</h2>
<p>This endpoint can be used to retrieve the details of your application. This is
useful if you want to check your <a href="#gas-allowance">gas allowance</a> before sending
a request that would consume gas.</p>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/client'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'get'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer d49694e5a3459759cc7ac1741de246e184e51d6e'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// your Client record</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns a single <a href="#client">Client</a>.</p>
</blockquote>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /v1/client</code></p>
<h2 id='get-all-codex-records'>Get All Codex Records</h2>
<p>This endpoint can be used to retrieve all Codex Records <em>that your application
currently owns.</em></p>

<aside class="notice">
  There is no public route to list all Codex Records; you may only list Codex
  Records that your application currently owns.
</aside>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/client/records'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'get'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer d49694e5a3459759cc7ac1741de246e184e51d6e'</span><span class="p">,</span>
  <span class="p">},</span>

  <span class="c1">// sort by date created in reverse and get 5 records, skipping the first ten</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">limit</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="na">offset</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="na">order</span><span class="p">:</span> <span class="s1">'-createdAt'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// an array of your application's Codex Records</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns an array of <a href="#codex-record">Codex Records</a>.</p>
</blockquote>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /v1/client/records</code></p>
<h3 id='request-parameters'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>limit</td>
<td>Number</td>
<td>100</td>
<td>How many records to retrieve. Use with <code>offset</code> to paginate through Codex Records.</td>
</tr>
<tr>
<td>offset</td>
<td>Number</td>
<td>0</td>
<td>How many records to skip before applying the <code>limit</code>. Use with <code>limit</code> to paginate through Codex Records.</td>
</tr>
<tr>
<td>order</td>
<td>String</td>
<td>createdAt</td>
<td>To sort in reverse order, specify this value as <code>-createdAt</code>.</td>
</tr>
</tbody></table>
<h2 id='create-a-codex-record'>Create a Codex Record</h2>
<p>This endpoint can be used to begin the creation of a Codex Record. With this
request, you&#39;re actually creating the Codex Record&#39;s <a href="#metadata">metadata</a> since
the Codex Record itself can&#39;t be created until the transaction has been mined on
the blockchain.</p>

<aside class="success">
  This is an asynchronous action. When the Codex Record has been created and
  logged on the blockchain, your application's webhook will be called with the
  new Codex Record in the request body. See <a href="#webhooks">webhooks</a>
  for details.
</aside>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">fs</span> <span class="nx">from</span> <span class="s1">'fs'</span>
<span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/client/record'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'post'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer d49694e5a3459759cc7ac1741de246e184e51d6e'</span><span class="p">,</span>
  <span class="p">},</span>

  <span class="c1">// by using "formData" here instead of "body", request will send this request</span>
  <span class="c1">//  as multipart/form-data, which is necessary for sending file data</span>
  <span class="na">formData</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="s1">'Really Cool Codex Record'</span><span class="p">,</span>
    <span class="na">description</span><span class="p">:</span> <span class="s1">'This is a really cool Codex Record!'</span><span class="p">,</span>
    <span class="na">mainImage</span><span class="p">:</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">'/tmp/uploads/cool-main-image.jpg'</span><span class="p">),</span>
    <span class="na">images</span><span class="p">:</span> <span class="p">[</span>
      <span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">'/tmp/uploads/cool-supplemental-image-1.jpg'</span><span class="p">),</span>
      <span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">'/tmp/uploads/cool-supplemental-image-2.jpg'</span><span class="p">),</span>
    <span class="p">],</span>
    <span class="na">files</span><span class="p">:</span> <span class="p">[</span>
      <span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">'/tmp/uploads/author-notes.txt'</span><span class="p">),</span>
      <span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">'/tmp/uploads/certificate-of-authenticity.pdf'</span><span class="p">),</span>
    <span class="p">],</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// the metadata for the soon-to-be-created Codex Record</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns Codex Record <a href="#metadata">metadata</a>, since the
Codex Record itself can&#39;t be created until the transaction has been mined.</p>
</blockquote>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>POST /v1/client/record</code></p>
<h3 id='webhook-event'>Webhook Event</h3>
<table><thead>
<tr>
<th>Event Name</th>
<th>Recipient</th>
</tr>
</thead><tbody>
<tr>
<td><code>codex-record:created</code></td>
<td>Owner</td>
</tr>
</tbody></table>
<h3 id='request-parameters-2'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>String</td>
<td>The plain text name of this Codex Record.</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td><em>(Optional)</em> The plain text description of this Codex Record. The field can be set to <code>null</code> or simply omitted to leave the description empty.</td>
</tr>
<tr>
<td>mainImage</td>
<td>File Data</td>
<td>The main image of this Codex Record.</td>
</tr>
<tr>
<td>images</td>
<td>Array[File Data]</td>
<td><em>(Optional)</em> An array of supplemental images that belong to this metadata.</td>
</tr>
<tr>
<td>files</td>
<td>Array[File Data]</td>
<td><em>(Optional)</em> An array of supplemental files that belong to this metadata. This is considered the &quot;<a href="#historical-provenance">historical provenance</a>&quot; of the Codex Record.</td>
</tr>
</tbody></table>
<h2 id='modify-a-codex-record'>Modify a Codex Record</h2>
<p>This endpoint can be used to modify the &quot;<a href="#quot-off-chain-quot-vs-quot-on-chain-quot-data">off-chain</a>&quot;
data for a Codex Record. Since no &quot;on-chain&quot; data can be modified with this
request, the response will be the immediately-updated Codex Record.</p>

<aside class="notice">
  To update "<a href="#quot-off-chain-quot-vs-quot-on-chain-quot-data">on-chain</a>"
  data such as a Codex Record's name, description, and/or images, you must use
  the <a href="#modify-a-codex-record-39-s-metadata">modify metadata route</a>.
</aside>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/client/record/0'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'put'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer d49694e5a3459759cc7ac1741de246e184e51d6e'</span><span class="p">,</span>
  <span class="p">},</span>

  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">isPrivate</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">isHistoricalProvenancePrivate</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="na">whitelistedAddresses</span><span class="p">:</span> <span class="p">[</span>
      <span class="s1">'0xf17f52151ebef6c7334fad080c5704d77216b732'</span><span class="p">,</span>
      <span class="s1">'0xc5fdf4076b8f3a5357c5e395ab970b5b54098fef'</span><span class="p">,</span>
      <span class="s1">'0x821aea9a577a9b44299b9c15c88cf3087f3b5544'</span><span class="p">,</span>
      <span class="s1">'0x0d1d4e623d10f9fba5db95830f7d3839406c6af2'</span><span class="p">,</span>
    <span class="p">],</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// the immediately-updated Codex Record</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns the immediately-updated <a href="#codex-record">Codex Record</a>.</p>
</blockquote>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>PUT /v1/client/record/:tokenId</code></p>
<h3 id='webhook-event-2'>Webhook Event</h3>
<table><thead>
<tr>
<th>Event Name</th>
<th>Recipient</th>
</tr>
</thead><tbody>
<tr>
<td><code>codex-record:address-whitelisted</code> (if <code>whitelistedAddresses</code> was replaced)</td>
<td>Each newly added whitelisted user</td>
</tr>
</tbody></table>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tokenId</td>
<td>Number</td>
<td>The <code>tokenId</code> of the Codex Record to update.</td>
</tr>
</tbody></table>
<h3 id='request-parameters-3'>Request Parameters</h3>
<p>At least one of the following parameters is required for this route:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>isPrivate</td>
<td>Boolean</td>
<td>This flag indicates that the metadata for the Codex Record is private and can only be retrieved by the owner, the <code>approvedAddress</code>, and the addresses listed in <code>whitelistedAddresses</code>.</td>
</tr>
<tr>
<td>whitelistedAddresses</td>
<td>Array[String]</td>
<td>An array of Ethereum addresses allowed to view private metadata for this Codex Record. This allows users to give people read-only access to their Codex Records.</td>
</tr>
<tr>
<td>isHistoricalProvenancePrivate</td>
<td>Boolean</td>
<td>This flag indicates whether or not <a href="#historical-provenance">historical provenance</a> (i.e. <code>metadata.files</code>) should be hidden, regardless of the value of <code>isPrivate</code>.</td>
</tr>
</tbody></table>

<aside class="warning">
  <code>whitelistedAddresses</code> is provided in this route as a convenience
  for replacing the list along with other "off-chain" data. Whatever you pass in
  will replacing the existing list, so be careful not to accidentally override
  existing data.

  <br><br>

  There are also dedicated routes to manage the <code>whitelistedAddresses</code>
  array, which are more suitable for adding and removing addresses one-by-one.
  See <a href="#get-a-codex-record-39-s-whitelisted-addresses">Get a Codex
  Record's Whitelisted Addresses</a> (and subsequent sections) for details.
</aside>
<h2 id='modify-a-codex-record-39-s-metadata'>Modify a Codex Record&#39;s Metadata</h2>
<p>This endpoint can be used to modify the &quot;<a href="#quot-off-chain-quot-vs-quot-on-chain-quot-data">on-chain</a>&quot;
data for a Codex Record. With this request, you&#39;re actually creating a
<a href="#pending-update">Pending Update</a> since the metadata itself can&#39;t be modified
until the transaction has been mined on the blockchain.</p>

<aside class="notice">
  To update "<a href="#quot-off-chain-quot-vs-quot-on-chain-quot-data">off-chain</a>"
  data such as a Codex Record's privacy settings, you must use the
  <a href="#modify-a-codex-record">modify Codex Record route</a>.
</aside>

<aside class="success">
  This is an asynchronous action. When the Codex Record has been updated and
  logged on the blockchain, your application's webhook will be called with the
  updated Codex Record in the request body. See <a href="#webhooks">webhooks</a>
  for details.
</aside>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">fs</span> <span class="nx">from</span> <span class="s1">'fs'</span>
<span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/client/record/0/metadata'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'put'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer d49694e5a3459759cc7ac1741de246e184e51d6e'</span><span class="p">,</span>
  <span class="p">},</span>

  <span class="c1">// by using "formData" here instead of "body", request will send this request</span>
  <span class="c1">//  as multipart/form-data, which is necessary for sending file data</span>
  <span class="na">formData</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="s1">'Super Duper New Title'</span><span class="p">,</span>
    <span class="na">description</span><span class="p">:</span> <span class="s1">'This will replace the current description!'</span><span class="p">,</span>

    <span class="c1">// replace the current mainImage</span>
    <span class="na">newMainImage</span><span class="p">:</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">'/tmp/uploads/super-duper-new-main-image.jpg'</span><span class="p">),</span>

    <span class="c1">// add these files to the files &amp; images arrays</span>
    <span class="na">newFiles</span><span class="p">:</span> <span class="p">[</span>
      <span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">'/tmp/uploads/2018-appraisal-documents.pdf'</span><span class="p">),</span>
    <span class="p">],</span>
    <span class="na">newImages</span><span class="p">:</span> <span class="p">[</span>
      <span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">'/tmp/uploads/super-duper-new-photo-1.jpg'</span><span class="p">),</span>
      <span class="nx">fs</span><span class="p">.</span><span class="nx">createReadStream</span><span class="p">(</span><span class="s1">'/tmp/uploads/super-duper-new-photo-2.jpg'</span><span class="p">),</span>
    <span class="p">],</span>

    <span class="c1">// before adding new files &amp; images, replace the existing arrays with these</span>
    <span class="c1">// see "Removing Files and Images" for details</span>
    <span class="na">files</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="s1">'5bb640d492d258fdf2efa290'</span><span class="p">,</span> <span class="p">},</span>
      <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="s1">'5bb640d492d258fdf2efa291'</span><span class="p">,</span> <span class="p">},</span>
    <span class="p">],</span>
    <span class="na">images</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="s1">'5bb640d492d258fdf2efa292'</span><span class="p">,</span> <span class="p">},</span>
      <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="s1">'5bb640d492d258fdf2efa293'</span><span class="p">,</span> <span class="p">},</span>
    <span class="p">],</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// a new Pending Update</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns a new <a href="#pending-update">Pending Update</a>.</p>
</blockquote>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>PUT /v1/client/record/:tokenId/metadata</code></p>
<h3 id='webhook-event-3'>Webhook Event</h3>
<table><thead>
<tr>
<th>Event Name</th>
<th>Recipient</th>
</tr>
</thead><tbody>
<tr>
<td><code>codex-record:modified</code></td>
<td>Owner</td>
</tr>
</tbody></table>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tokenId</td>
<td>Number</td>
<td>The <code>tokenId</code> of the Codex Record for which to modify the metadata of.</td>
</tr>
</tbody></table>
<h3 id='request-parameters-4'>Request Parameters</h3>
<p>At least one of the following parameters is required for this route:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>String</td>
<td>The new name of this Codex Record.</td>
</tr>
<tr>
<td>files</td>
<td>Array[<a href="#file">File</a>]</td>
<td>See <a href="#removing-files-and-images">Removing Files and Images</a> for details.</td>
</tr>
<tr>
<td>images</td>
<td>Array[<a href="#file">File</a>]</td>
<td>See <a href="#removing-files-and-images">Removing Files and Images</a> for details.</td>
</tr>
<tr>
<td>newFiles</td>
<td>Array[File Data]</td>
<td>An array of supplemental files to append to the existing <code>files</code> array for this Codex Record.</td>
</tr>
<tr>
<td>newImages</td>
<td>Array[File Data]</td>
<td>An array of supplemental images to append to the existing <code>images</code> array for this Codex Record.</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>The new description of this Codex Record. The field can be set to <code>null</code> to erase an existing description.</td>
</tr>
<tr>
<td>newMainImage</td>
<td>File Data</td>
<td>The new main image of this Codex Record.</td>
</tr>
</tbody></table>

<!--
  the previous code example is hella long, and the spacing looks weird with the
  upcoming code example right next to it, so this is kind of a hacky way to push
  down this subheader so that it's code example isn't nestled up next to the
  previous one
  -->

<p><br><br><br><br><br><br><br><br></p>
<h3 id='removing-files-and-images'>Removing Files and Images</h3>
<blockquote>
<p>Removing the <a href="#file">File</a> with id <code>5bb640d492d258fdf2efa294</code> from a Codex
Record&#39;s <code>images</code> array:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="c1">// first, get the existing images</span>
<span class="kr">const</span> <span class="nx">getCodexRecordOptions</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/records/0/images'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'get'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer d49694e5a3459759cc7ac1741de246e184e51d6e'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">getCodexRecordOptions</span><span class="p">,</span> <span class="p">(</span><span class="nx">getCodexRecordError</span><span class="p">,</span> <span class="nx">getCodexRecordResponse</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

  <span class="kr">const</span> <span class="nx">codexRecordImages</span> <span class="o">=</span> <span class="nx">getCodexRecordResponse</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span>

  <span class="c1">// the remove the image with id '5bb640d492d258fdf2efa294'</span>
  <span class="kr">const</span> <span class="nx">newCodexRecordImages</span> <span class="o">=</span> <span class="nx">codexRecordImages</span>
    <span class="p">.</span><span class="nx">filter</span><span class="p">((</span><span class="nx">image</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">image</span><span class="p">.</span><span class="nx">id</span> <span class="o">!==</span> <span class="s1">'5bb640d492d258fdf2efa294'</span>
    <span class="p">})</span>

    <span class="c1">// this map is optional since the the only field you're required to send in</span>
    <span class="c1">//  is the File's id</span>
    <span class="c1">//</span>
    <span class="c1">// it's perfectly fine to send the entire File object, but it's a good idea</span>
    <span class="c1">//  to reduce the amount of unnecessary data sent with requests</span>
    <span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">image</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="nx">image</span><span class="p">.</span><span class="nx">id</span> <span class="p">}</span>
    <span class="p">})</span>

  <span class="c1">// now send in the "new state" of the images array</span>
  <span class="kr">const</span> <span class="nx">updateCodexRecordOptions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/client/record/0/metadata'</span><span class="p">,</span>
    <span class="na">method</span><span class="p">:</span> <span class="s1">'put'</span><span class="p">,</span>
    <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer d49694e5a3459759cc7ac1741de246e184e51d6e'</span><span class="p">,</span>
    <span class="p">},</span>

    <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">images</span><span class="p">:</span> <span class="nx">newCodexRecordImages</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">}</span>

  <span class="nx">request</span><span class="p">(</span><span class="nx">updateCodexRecordOptions</span><span class="p">,</span> <span class="p">(</span><span class="nx">updateCodexRecordError</span><span class="p">,</span> <span class="nx">updateCodexRecordResponse</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">updateCodexRecordResponse</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// a new Pending Update</span>
  <span class="p">})</span>

<span class="p">})</span>
</code></pre>
<p>The <code>files</code> and <code>images</code> parameters are each arrays of <a href="#file">File</a> objects
(not to be confused with binary &quot;File Data&quot; in a <code>multipart/form-data</code> request...)
These parameters provide the mechanism for removing files and/or images.</p>

<p>To remove files and/or images from a Codex Record, follow these steps:</p>

<ol>
<li><p>If you do not already have the Codex Record, you will need to retrieve the
existing files and/or images first. You can get this data by <a href="#get-a-codex-record">getting the
whole Codex Record</a>, <a href="#get-a-codex-record-39-s-files-only">getting the Codex Record&#39;s
files only</a>, and/or <a href="#get-a-codex-record-39-s-images-only">getting the
Codex Record&#39;s images only</a>.</p></li>
<li><p>Remove the images from the array(s).</p></li>
<li><p>Send the &quot;new state&quot; of the array(s) with this request as <code>files</code> and/or
<code>images</code>.</p></li>
</ol>

<aside class="success">
  You're only <em>required</em> to send in the <code>id</code> of each
  <a href="#files">File</a>, since that's the only piece of data necessary to
  know which File to remove. However, it's perfectly fine to just send the
  entire File object.
</aside>
<h2 id='start-a-transfer'>Start a Transfer</h2>
<p>This endpoint can be used to start the process of transferring a Codex Record to
another person. Transferring is a two step process, see
<a href="#transferring-codex-records">Transferring Codex Records</a> for details.</p>

<aside class="success">
  This is an asynchronous action. When the Codex Record's <code>approvedAddress</code>
  has been updated on the blockchain and is ready to be
  <a href="#accept-a-transfer">accepted</a> by the recipient, your application's
  webhook will be called with the updated Codex Record in the request body. See
  <a href="#webhooks">webhooks</a> for details.
</aside>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/client/records/0/transfer/approve'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'put'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer d49694e5a3459759cc7ac1741de246e184e51d6e'</span><span class="p">,</span>
  <span class="p">},</span>

  <span class="c1">// address and email are mutually exclusive, choose one or the other but not both</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1">// email: 'email@example.com',</span>
    <span class="na">address</span><span class="p">:</span> <span class="s1">'0xf17f52151ebef6c7334fad080c5704d77216b732'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns the <a href="#codex-record">Codex Record</a> being
transferred, although no data will have changed at this point.</p>
</blockquote>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>PUT /v1/client/records/:tokenId/transfer/approve</code></p>
<h3 id='webhook-event-4'>Webhook Event</h3>
<table><thead>
<tr>
<th>Event Name</th>
<th>Recipient</th>
</tr>
</thead><tbody>
<tr>
<td><code>codex-record:address-approved:owner</code></td>
<td>Owner</td>
</tr>
<tr>
<td><code>codex-record:address-approved:approved</code></td>
<td>The newly approved user</td>
</tr>
</tbody></table>
<h3 id='url-parameters-3'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tokenId</td>
<td>Number</td>
<td>The <code>tokenId</code> of the Codex Record to transfer.</td>
</tr>
</tbody></table>
<h3 id='request-parameters-5'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>String</td>
<td><em>(Required if <code>address</code> is not specified)</em> The email address of the person to transfer this record to.</td>
</tr>
<tr>
<td>address</td>
<td>String</td>
<td><em>(Required if <code>email</code> is not specified)</em> The Ethereum address of the person to transfer this record to.</td>
</tr>
</tbody></table>

<aside class="notice">
  The two parameters accepted by this route are mutually exclusive, i.e. if you
  specify <code>email</code>, then <code>address</code> must not also be
  specified and vice versa. This restriction is necessary because
  <code>email</code> and <code>address</code> may identify two different people.
</aside>

<aside class="warning">
  If the specified email address does not belong to a registered user (i.e. the
  email address has not yet been used to log in to the Codex Viewer), an email
  will be sent to the specified address with a link to sign up and claim the
  incoming transfer.

  <br><br>

  However, passing a valid Ethereum address will always succeed.
</aside>
<h2 id='cancel-a-transfer'>Cancel a Transfer</h2>
<p>This endpoint can be used to stop the process of transferring a Codex Record to
another person. This essentially removes the currently set <code>approvedAddress</code>,
preventing that address from accepting the transfer (and removing it from their
<a href="#get-incoming-transfers">incoming transfers</a> list.) See
<a href="#transferring-codex-records">Transferring Codex Records</a> for details.</p>

<aside class="success">
  This is an asynchronous action. When the Codex Record's <code>approvedAddress</code>
  has been updated and logged on the blockchain, your application's webhook will
  be called with the updated Codex Record in the request body. See
  <a href="#webhooks">webhooks</a> for details.
</aside>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/client/records/0/transfer/cancel'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'put'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer d49694e5a3459759cc7ac1741de246e184e51d6e'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns the <a href="#codex-record">Codex Record</a> for which the
transfer is being cancelled, although no data will have changed at this point.</p>
</blockquote>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>PUT /v1/client/records/:tokenId/transfer/cancel</code></p>
<h3 id='url-parameters-4'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tokenId</td>
<td>Number</td>
<td>The <code>tokenId</code> of the Codex Record for which to cancel the transfer of.</td>
</tr>
</tbody></table>
<h2 id='accept-a-transfer'>Accept a Transfer</h2>
<p>This endpoint can be used to accept an incoming transfer of a Codex Record. See
<a href="#transferring-codex-records">Transferring Codex Records</a> for details.</p>

<aside class="success">
  This is an asynchronous action. When the Codex Record has been successfully
  transferred to your application's address and logged on the blockchain, your
  application's webhook will be called with the updated Codex Record in the
  request body. See <a href="#webhooks">webhooks</a> for details.
</aside>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/client/records/0/transfer/accept'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'put'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer d49694e5a3459759cc7ac1741de246e184e51d6e'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns the <a href="#codex-record">Codex Record</a> for which the
transfer is being accepted, although no data will have changed at this point.</p>
</blockquote>
<h3 id='http-request-8'>HTTP Request</h3>
<p><code>PUT /v1/client/records/:tokenId/transfer/accept</code></p>
<h3 id='webhook-event-5'>Webhook Event</h3>
<table><thead>
<tr>
<th>Event Name</th>
<th>Recipient</th>
</tr>
</thead><tbody>
<tr>
<td><code>codex-record:transferred:old-owner</code></td>
<td>The old owner</td>
</tr>
<tr>
<td><code>codex-record:transferred:new-owner</code></td>
<td>The new owner</td>
</tr>
</tbody></table>
<h3 id='url-parameters-5'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tokenId</td>
<td>Number</td>
<td>The <code>tokenId</code> of the Codex Record for which to accept the transfer of.</td>
</tr>
</tbody></table>
<h2 id='ignore-a-transfer'>Ignore a Transfer</h2>
<p>This endpoint can be used to mark an incoming transfer as &quot;ignored&quot;. This is
useful to (visually) remove a transfer from your <a href="#get-incoming-transfers">incoming transfers</a>
list without accepting it, because there&#39;s no blockchain mechanism to explicitly
reject a transfer. See <a href="#transferring-codex-records">Transferring Codex Records</a>
for details.</p>

<p>This route sets the Codex Record&#39;s <code>isIgnored</code> property to <code>true</code>. See <a href="#codex-record">Codex
Record</a> for details.</p>

<aside class="success">
  This route does not modify any "<a href="#quot-off-chain-quot-vs-quot-on-chain-quot-data">on-chain</a>"
  data, so the response will be the immediately-updated Codex Record.
</aside>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/client/records/0/transfer/ignore'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'put'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer d49694e5a3459759cc7ac1741de246e184e51d6e'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// the immediately-updated Codex Record</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns the immediately-updated <a href="#codex-record">Codex Record</a>,
with <code>isIgnored</code> set to <code>true</code>.</p>
</blockquote>
<h3 id='http-request-9'>HTTP Request</h3>
<p><code>PUT /v1/client/records/:tokenId/transfer/ignore</code></p>
<h3 id='url-parameters-6'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tokenId</td>
<td>Number</td>
<td>The <code>tokenId</code> of the Codex Record for which to ignore the transfer of.</td>
</tr>
</tbody></table>
<h2 id='get-outgoing-transfers'>Get Outgoing Transfers</h2>
<p>This endpoint can be used to retrieve a list of your application&#39;s outgoing
transfers. Outgoing transfers are Codex Records that your application is owner
of, which also have an <code>approvedAddress</code> set. See <a href="#transferring-codex-records">Transferring Codex Records</a>
for details.</p>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/client/transfers/outgoing'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'get'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer d49694e5a3459759cc7ac1741de246e184e51d6e'</span><span class="p">,</span>
  <span class="p">},</span>

  <span class="c1">// sort by date created in reverse and get 5 records, skipping the first ten</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">limit</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="na">offset</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="na">order</span><span class="p">:</span> <span class="s1">'-createdAt'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// your application's outgoing transfers</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns an array of <a href="#codex-record">Codex Records</a>.</p>
</blockquote>
<h3 id='http-request-10'>HTTP Request</h3>
<p><code>GET /v1/client/transfers/outgoing</code></p>
<h3 id='request-parameters-6'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>limit</td>
<td>Number</td>
<td>100</td>
<td>How many records to retrieve. Use with <code>offset</code> to paginate through outgoing transfers.</td>
</tr>
<tr>
<td>offset</td>
<td>Number</td>
<td>0</td>
<td>How many records to skip before applying the <code>limit</code>. Use with <code>limit</code> to paginate through outgoing transfers.</td>
</tr>
<tr>
<td>order</td>
<td>String</td>
<td>createdAt</td>
<td>To sort in reverse order, specify this value as <code>-createdAt</code>.</td>
</tr>
</tbody></table>
<h2 id='get-incoming-transfers'>Get Incoming Transfers</h2>
<p>This endpoint can be used to retrieve a list of your application&#39;s incoming
transfers. Incoming transfers are Codex Records that your application does not
own, which also have their <code>approvedAddress</code> property set to your application&#39;s
Ethereum address. See <a href="#transferring-codex-records">Transferring Codex Records</a>
for details.</p>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/client/transfers/incoming'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'get'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer d49694e5a3459759cc7ac1741de246e184e51d6e'</span><span class="p">,</span>
  <span class="p">},</span>

  <span class="c1">// sort by date created in reverse and get 5 records, skipping the first ten</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">limit</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="na">offset</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="na">order</span><span class="p">:</span> <span class="s1">'-createdAt'</span><span class="p">,</span>

    <span class="c1">// don't return ignored transfers</span>
    <span class="na">filters</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">isIgnored</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// your application's incoming transfers</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns an array of <a href="#codex-record">Codex Records</a>.</p>
</blockquote>
<h3 id='http-request-11'>HTTP Request</h3>
<p><code>GET /v1/client/transfers/incoming</code></p>
<h3 id='request-parameters-7'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>limit</td>
<td>Number</td>
<td>100</td>
<td>How many records to retrieve. Use with <code>offset</code> to paginate through incoming transfers.</td>
</tr>
<tr>
<td>offset</td>
<td>Number</td>
<td>0</td>
<td>How many records to skip before applying the <code>limit</code>. Use with <code>limit</code> to paginate through incoming transfers.</td>
</tr>
<tr>
<td>order</td>
<td>String</td>
<td>createdAt</td>
<td>To sort in reverse order, specify this value as <code>-createdAt</code>.</td>
</tr>
<tr>
<td>filters[isIgnored]</td>
<td>Boolean</td>
<td></td>
<td>This can be used to return only ignored transfers (when <code>true</code>), or only non-ignored transfers (when <code>false</code>).</td>
</tr>
</tbody></table>
<h2 id='get-a-codex-record-39-s-whitelisted-addresses'>Get a Codex Record&#39;s Whitelisted Addresses</h2>
<p>This endpoint can be used to retrieve a Codex Record&#39;s <code>whitelistedAddresses</code>
property, an array of Ethereum addresses allowed to view private metadata for
this Codex Record. See <a href="#whitelisted-addresses">Whitelisted Addresses</a> for
details.</p>

<aside class="notice">
  The <code>whitelistedAddresses</code> array allows users to give people
  read-only access to their Codex Records. This property is only visible to the
  owner of a Codex Record, and is reset to an empty array when transferred.
</aside>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/client/records/0/whitelisted-addresses'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'get'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer d49694e5a3459759cc7ac1741de246e184e51d6e'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// the whitelistedAddresses array for this Codex Record</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns an array of Ethereum addresses (strings).</p>
</blockquote>
<h3 id='http-request-12'>HTTP Request</h3>
<p><code>GET /v1/client/records/:tokenId/whitelisted-addresses</code></p>
<h3 id='url-parameters-7'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tokenId</td>
<td>Number</td>
<td>The <code>tokenId</code> of the Codex Record for which to the whitelisted addresses of.</td>
</tr>
</tbody></table>
<h2 id='add-an-address-to-a-codex-record-39-s-whitelisted-addresses'>Add an Address to a Codex Record&#39;s Whitelisted Addresses</h2>
<p>This endpoint can be used to add a single Ethereum address to a Codex Record&#39;s
<code>whitelistedAddresses</code> array. The address is then allowed to view private
metadata for this Codex Record, effectively giving them read-only access. See
<a href="#whitelisted-addresses">Whitelisted Addresses</a> for details.</p>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/client/records/0/whitelisted-addresses'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'get'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer d49694e5a3459759cc7ac1741de246e184e51d6e'</span><span class="p">,</span>
  <span class="p">},</span>

  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">address</span><span class="p">:</span> <span class="s1">'0xf17f52151ebef6c7334fad080c5704d77216b732'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// the updated whitelistedAddresses array for this Codex Record</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns the updated <code>whitelistedAddresses</code> array.</p>
</blockquote>
<h3 id='http-request-13'>HTTP Request</h3>
<p><code>POST /v1/client/records/:tokenId/whitelisted-addresses</code></p>
<h3 id='webhook-event-6'>Webhook Event</h3>
<table><thead>
<tr>
<th>Event Name</th>
<th>Recipient</th>
</tr>
</thead><tbody>
<tr>
<td><code>codex-record:address-whitelisted</code></td>
<td>The newly whitelisted user</td>
</tr>
</tbody></table>
<h3 id='url-parameters-8'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tokenId</td>
<td>Number</td>
<td>The <code>tokenId</code> of the Codex Record for which to the whitelisted addresses of.</td>
</tr>
</tbody></table>
<h3 id='request-parameters-8'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>String</td>
<td>The Ethereum address to add to the list of whitelisted addresses.</td>
</tr>
</tbody></table>
<h2 id='remove-an-address-from-a-codex-record-39-s-whitelisted-addresses'>Remove an Address from a Codex Record&#39;s Whitelisted Addresses</h2>
<p>This endpoint can be used to remove a single Ethereum address from a Codex
Record&#39;s <code>whitelistedAddresses</code> array, revoking their ability to view the
private metadata. See <a href="#whitelisted-addresses">Whitelisted Addresses</a> for
details.</p>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/client/records/0/whitelisted-addresses'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'delete'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer d49694e5a3459759cc7ac1741de246e184e51d6e'</span><span class="p">,</span>
  <span class="p">},</span>

  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">address</span><span class="p">:</span> <span class="s1">'0xf17f52151ebef6c7334fad080c5704d77216b732'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// the updated whitelistedAddresses array for this Codex Record</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns the updated <code>whitelistedAddresses</code> array.</p>
</blockquote>
<h3 id='http-request-14'>HTTP Request</h3>
<p><code>DELETE /v1/client/records/:tokenId/whitelisted-addresses</code></p>
<h3 id='url-parameters-9'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tokenId</td>
<td>Number</td>
<td>The <code>tokenId</code> of the Codex Record for which to the whitelisted addresses of.</td>
</tr>
</tbody></table>
<h3 id='request-parameters-9'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>String</td>
<td>The Ethereum address to remove from the list of whitelisted addresses.</td>
</tr>
</tbody></table>
<h2 id='entirely-replace-a-codex-record-39-s-whitelisted-addresses'>Entirely Replace a Codex Record&#39;s Whitelisted Addresses</h2>
<p>This endpoint can be used to entirely replace a Codex Record&#39;s
<code>whitelistedAddresses</code> array, instead of <a href="#add-an-address-to-a-codex-record-39-s-whitelisted-addresses">adding</a> and <a href="#remove-an-address-from-a-codex-record-39-s-whitelisted-addresses">removing</a> one-by-one.
See <a href="#whitelisted-addresses">Whitelisted Addresses</a> for details.</p>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/v1/client/records/0/whitelisted-addresses'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'put'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer d49694e5a3459759cc7ac1741de246e184e51d6e'</span><span class="p">,</span>
  <span class="p">},</span>

  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">addresses</span><span class="p">:</span> <span class="p">[</span>
      <span class="s1">'0x821aea9a577a9b44299b9c15c88cf3087f3b5544'</span><span class="p">,</span>
      <span class="s1">'0x0d1d4e623d10f9fba5db95830f7d3839406c6af2'</span><span class="p">,</span>
      <span class="s1">'0x2932b7a2355d6fecc4b5c0b6bd44cc31df247a2e'</span><span class="p">,</span>
      <span class="s1">'0x2191ef87e392377ec08e7c08eb105ef5448eced5'</span><span class="p">,</span>
      <span class="s1">'0x0f4f2ac550a1b4e2280d04c21cea7ebd822934b5'</span><span class="p">,</span>
    <span class="p">],</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">result</span><span class="p">)</span> <span class="c1">// the updated whitelistedAddresses array for this Codex Record</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns an array of Ethereum addresses (strings).</p>
</blockquote>
<h3 id='http-request-15'>HTTP Request</h3>
<p><code>PUT /v1/client/records/:tokenId/whitelisted-addresses</code></p>
<h3 id='webhook-event-7'>Webhook Event</h3>
<table><thead>
<tr>
<th>Event Name</th>
<th>Recipient</th>
</tr>
</thead><tbody>
<tr>
<td><code>codex-record:address-whitelisted</code></td>
<td>Each newly whitelisted user</td>
</tr>
</tbody></table>
<h3 id='url-parameters-10'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tokenId</td>
<td>Number</td>
<td>The <code>tokenId</code> of the Codex Record for which to the whitelisted addresses of.</td>
</tr>
</tbody></table>
<h3 id='request-parameters-10'>Request Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>addresses</td>
<td>Array[String]</td>
<td>An array of Ethereum addresses to replace the current whitelisted addresses with.</td>
</tr>
</tbody></table>
<h1 id='general-concepts'>General Concepts</h1>
<p>This section explains miscellaneous concepts referenced throughout this
documentation.</p>
<h2 id='api-requests'>API Requests</h2>
<blockquote>
<p>This HTTP request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/v1/client/record/100/metadata?name=Really%20Cool%20Codex%20Record</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">https://rinkeby-api.codexprotocol.com</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer d49694e5a3459759cc7ac1741de246e184e51d6e</span>

description=This+is+a+really+cool+Codex+Record!
</code></pre>
<blockquote>
<p>is handled identically to this one:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/v1/client/record/0/metadata</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">https://rinkeby-api.codexprotocol.com</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer e933e3e02e4f16d552e469367b25293d75c3d3c2</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Really Cool Codex Record"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is a really cool Codex Record!"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>and this one:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/v1/client/record/0/metadata?description=This%20is%20a%20really%20cool%20Codex%20Record!</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">https://rinkeby-api.codexprotocol.com</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer e933e3e02e4f16d552e469367b25293d75c3d3c2</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW</span>

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="name"

Really Cool Codex Record
------WebKitFormBoundary7MA4YWxkTrZu0gW--
</code></pre>
<p>The Codex API is very flexible with how it handles incoming requests. For most
routes, the API will accept a request with a <code>Content-Type</code> of
<code>multipart/form-data</code>, <code>application/x-www-form-urlencoded</code>, or
<code>application/json</code>. Additionally, you may specify request parameters as either
query parameters or body parameters (with the exception of file data, of course).</p>

<p>The exceptions are:</p>

<ol>
<li><p>Anytime you send file data with the request, you must send the request as
<code>Content-Type: multipart/form-data</code>.</p></li>
<li><p>When requesting access tokens, you must send the request as
<code>Content-Type: application/x-www-form-urlencoded</code>. This is required by the
<a href="https://tools.ietf.org/html/rfc6749?#section-4.1.3">OAuth2 Specification</a>.</p></li>
</ol>

<p>For details on what to expect from The Codex API in response, see <a href="#response-examples">Response Examples</a>.</p>
<h2 id='webhooks'>Webhooks</h2>
<p>Calling certain routes may cause asynchronous transactions to be submitted to
the blockchain. Specifically, any action that modifies &quot;<a href="#quot-off-chain-quot-vs-quot-on-chain-quot-data">on-chain</a>&quot;
data is asynchronous and has an associated webhook event.</p>

<p>Your application should not assume the result of calling an asynchronous route
will be performed immediately. Instead, your application should have an endpoint
that can be called by The Codex API when the asynchronous action is complete and
the blockchain state has been updated.</p>

<p>For example, when updating <a href="#modify-a-codex-record-39-s-metadata">modifying a Codex Record&#39;s Metadata</a>,
your application should wait until it&#39;s webhook is called with the
<code>codex-record:modified</code> event. At this point your application can react to the
updated data in any way necessary.</p>
<h3 id='asynchronous-actions'>Asynchronous Actions</h3>
<p>The following actions should be considered asynchronous, and your application
should wait for their associated webhook events before considering requests sent
to them as successful.</p>

<aside class="success">
  Any action that modifies "<a href="#quot-off-chain-quot-vs-quot-on-chain-quot-data">on-chain</a>"
  data is an asynchronous action.
</aside>

<table><thead>
<tr>
<th>Action</th>
<th>Event(s)</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#create-a-codex-record">Creating a Codex Record</a></td>
<td><code>codex-record:created</code></td>
</tr>
<tr>
<td><a href="#modify-a-codex-record-39-s-metadata">Modifying a Codex Record&#39;s Metadata</a></td>
<td><code>codex-record:modified</code></td>
</tr>
<tr>
<td><a href="#start-a-transfer">Starting a Transfer</a></td>
<td><code>codex-record:address-approved:owner</code> and <code>codex-record:address-approved:approved</code></td>
</tr>
<tr>
<td><a href="#cancel-a-transfer">Canceling a Transfer</a></td>
<td><code>codex-record:address-approved:cancel</code></td>
</tr>
<tr>
<td><a href="#accept-a-transfer">Accepting a Transfer</a></td>
<td><code>codex-record:transferred:old-owner</code> and <code>codex-record:transferred:new-owner</code></td>
</tr>
</tbody></table>
<h3 id='webhook-structure'>Webhook Structure</h3>
<blockquote>
<p>An example request body sent to your application&#39;s webhook:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"timestamp"</span><span class="p">:</span> <span class="mi">1539024178127</span><span class="p">,</span>
  <span class="s2">"hash"</span><span class="p">:</span> <span class="s2">"5fed9779c702a873e8c68872eca959876d9d00a84a1cb5fb58ecd6c3e83f307b"</span><span class="p">,</span>
  <span class="s2">"eventName"</span><span class="p">:</span> <span class="s2">"codex-record:created"</span><span class="p">,</span>
  <span class="s2">"eventData"</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1">// varies by event, usually a Codex Record</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>When blockchain events occur, your application&#39;s webhook will be sent a <code>POST</code>
request with an <code>application/json</code> body containing the following data:</p>

<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>hash</td>
<td>String</td>
<td>The <a href="https://nodejs.org/api/crypto.html#crypto_crypto_createhmac_algorithm_key_options">sha256</a> hash of the string <code>${timestamp}:${client_id}</code>, using your application&#39;s secret as the <code>key</code>. See <a href="#verifying-webhook-requests">Verifying Webhook Requests</a> for details.</td>
</tr>
<tr>
<td>timestamp</td>
<td>Number</td>
<td>Unix timestamp (in milliseconds) of when the request was sent. See <a href="#verifying-webhook-requests">Verifying Webhook Requests</a> for details.</td>
</tr>
<tr>
<td>eventName</td>
<td>String</td>
<td>The name of the event. See <a href="#webhook-events">Webhook Events</a> for details.</td>
</tr>
<tr>
<td>eventData</td>
<td>Varies</td>
<td>The relevant data for this event. Usually a <a href="#codex-record">Codex Record</a>, but varies by event. See <a href="#webhook-events">Webhook Events</a> for details.</td>
</tr>
</tbody></table>

<aside class="warning">
  Your webook endpoint <em>must</em> return a 2xx status code, or The Codex API will
  continue to retry the request several times (with exponential backoff) before
  giving up.
</aside>
<h3 id='webhook-events'>Webhook Events</h3>
<p>The following table lists all webhook events.</p>

<table><thead>
<tr>
<th>Event Name</th>
<th>Event Data</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>codex-record:created</td>
<td><a href="#codex-record">Codex Record</a></td>
<td>Sent after <a href="#create-a-codex-record">creating a Codex Record</a>, when the Codex Record has been created and logged on the blockchain.</td>
</tr>
<tr>
<td>codex-record:modified</td>
<td><a href="#codex-record">Codex Record</a></td>
<td>Sent after <a href="#modify-a-codex-record-39-s-metadata">modifying a Codex Record&#39;s metadata</a>, when the Codex Record has been updated and logged on the blockchain.</td>
</tr>
<tr>
<td>codex-record:address-whitelisted</td>
<td><a href="#codex-record">Codex Record</a></td>
<td>Sent after someone <a href="#get-a-codex-record-39-s-whitelisted-addresses">adds your application to a Codex Record&#39;s whitelisted addresses</a>. This event is sent immediately as this is not an asynchronous action.</td>
</tr>
<tr>
<td>codex-record:transferred:new-owner</td>
<td><a href="#codex-record">Codex Record</a></td>
<td>Sent after <a href="#accept-a-transfer">accepting an incoming transfer</a>, when the Codex Record has been successfully transferred to your address and logged on the blockchain.</td>
</tr>
<tr>
<td>codex-record:transferred:old-owner</td>
<td><a href="#codex-record">Codex Record</a></td>
<td>Sent after someone <a href="#accept-a-transfer">accepts one of your application&#39;s outgoing transfers</a>, when the Codex Record has been successfully transferred to the recipient&#39;s address and logged on the blockchain.</td>
</tr>
<tr>
<td>codex-record:address-approved:owner</td>
<td><a href="#codex-record">Codex Record</a></td>
<td>Sent after <a href="#start-a-transfer">starting a transfer</a>, when the Codex Record&#39;s <code>approvedAddress</code> has been updated on the blockchain and is ready to be <a href="#accept-a-transfer">accepted</a> by the recipient.</td>
</tr>
<tr>
<td>codex-record:address-approved:approved</td>
<td><a href="#codex-record">Codex Record</a></td>
<td>Sent after someone <a href="#start-a-transfer">starts a transfer</a> to your application, when the Codex Record&#39;s <code>approvedAddress</code> has been updated on the blockchain and is ready to be <a href="#accept-a-transfer">accepted</a> by your application.</td>
</tr>
<tr>
<td>codex-record:address-approved:cancel</td>
<td><a href="#codex-record">Codex Record</a></td>
<td>Sent after <a href="#start-a-transfer">cancelling a transfer</a>, when the Codex Record&#39;s <code>approvedAddress</code> has been cleared on the blockchain and can no longer be <a href="#accept-a-transfer">accepted</a> by the recipient.</td>
</tr>
</tbody></table>

<!--
  @TODO: add these events to the table when CODX / fees are documented:

  codex-coin:transferred
  codex-coin:registry-contract-approved
-->

<aside class="notice">
  Not all webhook events are the result of an asynchronous action (e.g.
  <code>codex-record:address-whitelisted</code>), but all asynchronous actions
  have an associated webhook event.
</aside>
<h3 id='verifying-webhook-requests'>Verifying Webhook Requests</h3>
<blockquote>
<p>A simple webhook implementation that verifies webhook requests from The Codex API.</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">crypto</span> <span class="nx">from</span> <span class="s1">'crypto'</span>
<span class="kr">import</span> <span class="nx">express</span> <span class="nx">from</span> <span class="s1">'express'</span>
<span class="kr">import</span> <span class="nx">bodyParser</span> <span class="nx">from</span> <span class="s1">'body-parser'</span>

<span class="kr">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">()</span>

<span class="c1">// your webhook will always be passed an application/json request</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">'/codex-webhook'</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

  <span class="kr">const</span> <span class="p">{</span> <span class="nx">hash</span><span class="p">,</span>  <span class="nx">timestamp</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">body</span>

  <span class="c1">// if, for some reason, your application's webhook is called without these</span>
  <span class="c1">//  parameters, the request most likely did not come from The Codex API and</span>
  <span class="c1">//  should be immediately rejected</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hash</span> <span class="o">||</span> <span class="o">!</span><span class="nx">timestamp</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">400</span><span class="p">)</span>
    <span class="k">return</span>
  <span class="p">}</span>

  <span class="c1">// if the specified timestamp is in the future or is more than 5 minutes in</span>
  <span class="c1">//  the past, consider this a fraudulent request</span>
  <span class="c1">//</span>
  <span class="c1">// your "timestamp validity" window can be whatever you deem appropriate, but</span>
  <span class="c1">//  we recommend 5 minutes</span>
  <span class="c1">//</span>
  <span class="c1">// this is used to prevent the request from being "replayed" at a later date</span>
  <span class="c1">//  (via a man-in-the-middle or similar attack)</span>
  <span class="kr">const</span> <span class="nx">now</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">timestamp</span> <span class="o">&gt;</span> <span class="nx">now</span> <span class="o">||</span> <span class="nx">now</span> <span class="o">-</span> <span class="nx">timestamp</span> <span class="o">&gt;</span> <span class="mi">300000</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">400</span><span class="p">)</span>
    <span class="k">return</span>
  <span class="p">}</span>

  <span class="c1">// construct the "valid hash" and compare with the hash sent by The  Codex API</span>
  <span class="kr">const</span> <span class="nx">validHash</span> <span class="o">=</span> <span class="nx">crypto</span>
    <span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nx">client_secret</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">timestamp</span><span class="p">}</span><span class="s2">:</span><span class="p">${</span><span class="nx">client_id</span><span class="p">}</span><span class="s2">`</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">)</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">hash</span> <span class="o">!==</span> <span class="nx">validHash</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">401</span><span class="p">)</span>
    <span class="k">return</span>
  <span class="p">}</span>

  <span class="c1">// do whatever your application should do in response to this event here</span>

  <span class="c1">// let The Codex API know this webhook call was successful</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">sendStatus</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>

<span class="p">})</span>
</code></pre>
<blockquote>
<p>Remember to replace <code>client_id</code> and <code>client_secret</code> with your application&#39;s <code>client_id</code> and <code>client_secret</code>.</p>
</blockquote>

<p>The <code>hash</code> and <code>timestamp</code> properties passed with every webhook request should
be used to verify that the request was actually sent by The Codex API and hasn&#39;t
been spoofed by an attacker. Your application should verify the hash for <em>all</em>
webhook events.</p>

<p>The verify the request, calculate the <a href="https://nodejs.org/api/crypto.html#crypto_crypto_createhmac_algorithm_key_options">sha256</a>
hash of the string <code>${timestamp}:${client_id}</code> using your application&#39;s secret
as the <code>key</code>. Then compare the result with the <code>hash</code> specified in the request.</p>
<h2 id='gas-allowance'>Gas Allowance</h2>
<p>Since each blockchain transaction The Codex API sends on behalf of your
application cost small amounts of Ether (known as &quot;gas&quot;), we limit all
applications to a certain amount of gas per period. This ensures The Codex API
is not abused.</p>

<p>At the start of each period, your gas allowance is reset. The following table
shows the reset periods for each environment:</p>

<table><thead>
<tr>
<th>Network</th>
<th>Period</th>
</tr>
</thead><tbody>
<tr>
<td>Ropsten</td>
<td>Every 24 hours</td>
</tr>
<tr>
<td>Rinkeby</td>
<td>Every 30 days</td>
</tr>
<tr>
<td>Mainnet</td>
<td>Every 30 days</td>
</tr>
</tbody></table>

<aside class="success">
  Currently, all applications receive <strong>40,500,000 gas</strong> per period.
  That's enough to create and transfer about 100 records. If you believe your
  application requires more gas per period, please
  <a href="mailto:developers@codexprotocol.com?subject=Gas%20Allowance%20Increase%20Request&body=Let%20us%20know%20why%20your%20application%20needs%20a%20higher%20Gas%20Allowance.">contact us</a> and we can work
  something out.
</aside>
<h2 id='privacy'>Privacy</h2>
<p>The public nature of blockchain presents some interesting challenges when
dealing with information many people people wish to keep private. To take
advantage of Ethereum&#39;s distributed, public ledger while still protecting
our user&#39;s private data, Codex Protocol has taken a hybrid &quot;off-chain / on-chain&quot;
approach to storing user data.</p>
<h3 id='quot-off-chain-quot-vs-quot-on-chain-quot-data'>&quot;Off-Chain&quot; vs &quot;On-Chain&quot; Data</h3>
<p>All <a href="#metadata">metadata</a> is stored &quot;off-chain&quot; (i.e. in a
<a href="#metadata-provider">metadata provider</a>&#39;s database), but <em>hashes</em> of this data
are stored on &quot;on-chain&quot; (i.e in a Codex Protocol smart contract.) These hashes
can be used to verify the data stored in a metadata provider&#39;s database matches
the information on the blockchain, and therefore has not been tampered with.</p>

<p>Specifically, the only &quot;on-chain&quot; data are hashes of the Codex Record&#39;s name,
description, and associated files. Sending a request that will modify &quot;on-chain&quot;
data is considered an asynchronous action and will eventually result in your
application receiving a webhook event. See <a href="#webhooks">webhooks</a> for details.</p>

<p>Updates to any other &quot;off-chain&quot; property of the Codex Record (such as the
<code>isPrivate</code> flag, or the <code>whitelistedAddresses</code> array), will be immediately
applied and (usually) won&#39;t cause a webhook event to be sent.</p>

<p>This &quot;off-chain / on-chain&quot; data separation is why there are two routes to
modify a Codex Record. When you <a href="#modify-a-codex-record">Modify a Codex Record</a>,
you&#39;re modifying it&#39;s &quot;off-chain&quot; data. When you
<a href="#modify-a-codex-record-39-s-metadata">Modify a Codex Record&#39;s Metadata</a>, you&#39;re
modifying it&#39;s &quot;on-chain&quot; data.</p>
<h3 id='permissions'>Permissions</h3>
<p>Some properties of a Codex Record and it&#39;s metadata are not returned in API
responses (i.e. they will be <code>undefined</code>) if the Codex Record marked as private
and the requesting user does not have the appropriate permissions.</p>

<p>There are three levels of permissions for Codex Records:</p>

<ol>
<li><strong>Owner</strong> - full read &amp; write permissions, all data always returned</li>
<li><strong>Whitelisted Addresses</strong> - read-only permissions, most data returned</li>
<li><strong>Public Access / Non-Whitelisted Addresses</strong> - read-only permissions, only public information returned</li>
</ol>

<p>Additionally, there are two levels of privacy for a Codex Record:</p>

<ol>
<li><strong><code>isPrivate</code></strong> - indicates that the Codex Record&#39;s metadata is private and can only be retrieved by the owner or whitelisted addresses.</li>
<li><strong><code>isHistoricalProvenancePrivate</code></strong> - indicates whether or not the Codex Record&#39;s <a href="#historical-provenance">historical provenance</a> should be hidden, regardless of the value of <code>isPrivate</code>.</li>
</ol>

<p>Individual permissions for each property of a Codex Record and it&#39;s metadata are
listed in <a href="#response-examples">Response Examples</a>.</p>

<aside class="success">
  All Codex Records are fully private by default and must be explicitly
  <a href="#modify-a-codex-record">marked as public</a> by the owner.
</aside>
<h3 id='whitelisted-addresses'>Whitelisted Addresses</h3>
<p>Every Codex Record has an &quot;off-chain&quot; list of Ethereum addresses allowed to view
it&#39;s private metadata. The <code>whitelistedAddresses</code> array allows users to provide
read-only access for any address they wish. See <a href="#get-a-codex-record-39-s-whitelisted-addresses">Get a Codex Record&#39;s Whitelisted Addresses</a>
(and subsequent sections) for details on how to retrieve and update this list.</p>

<p>Even though private metadata is visible to whitelisted addresses, the
<code>isHistoricalProvenancePrivate</code> flag can be used to hide the
<a href="#historical-provenance">historical provenance</a> for a Codex Record. This way,
the owner can keep some (presumably more confidential) files hidden while still
providing <em>some</em> access to others.</p>
<h3 id='approved-addresses'>Approved Addresses</h3>
<p>A Codex Record can also have an <code>approvedAddress</code>, which is an Ethereum address
that is allowed to transfer the Codex Record to itself. This is necessary for
the two-step transfer process. See <a href="#transferring-codex-records">Transferring Codex Records</a>
for details.</p>

<aside class="success">
  The <code>approvedAddress</code> is considered to be part of a Codex Record's
  <a href="#whitelisted-addresses">whitelisted addresses</a>, so addresses
  approved to transfer a Codex Record also have read-only permissions for
  private metadata.
</aside>
<h2 id='historical-provenance'>Historical Provenance</h2>
<p>In addition to an array of <code>images</code>, a Codex Record may also contain a special
array (<code>files</code>) that we call the &quot;historical provenance&quot;. The intent is for
<code>images</code> to contain pictures and/or videos of the item itself and for <code>files</code>
to contain other, arbitrary files such as a PDF of physical appraisal documents
or a scan of an original purchase receipt.</p>

<p>Since files in historical provenance may be considered more &quot;confidential&quot;, a
separate privacy control is available to keep these files hidden even when being
viewed by someone with <a href="#permissions">permissions to see private metadata</a>. If a
Codex Record&#39;s <code>isHistoricalProvenancePrivate</code> flag is <code>true</code>, the <code>files</code>
array will always be visible <em>to the owner only.</em></p>
<h2 id='transferring-codex-records'>Transferring Codex Records</h2>
<p>Transferring a Codex Record is a two-step process:</p>

<ol>
<li><p>The owner <a href="#start-a-transfer">approves another user</a> to accept the transfer
 of the Codex Record. This sets the Codex Record&#39;s <code>approvedAddress</code> to that
 user&#39;s Ethereum address, and grants them read-only access to the private
 metadata. At this point, the Codex Record is considered an
 <a href="#get-outgoing-transfers">outgoing transfer</a> for the owner and an
 <a href="#get-incoming-transfers">incoming transfer</a> for the approved user.</p></li>
<li><p>The approved user must then explicitly <a href="#accept-a-transfer">accept the incoming transfer</a>.
 The approved user may also choose to <a href="#ignore-a-transfer">ignore the transfer</a>,
 in which case they remain the <code>approvedAddress</code> but the Codex Record can be
 hidden from their list of incoming transfers.</p></li>
</ol>

<p>When the Codex Record is successfully transferred to the <code>approvedAddress</code> and
logged on the blockchain, the approved user becomes the new owner of the record
and a <a href="#provenance-event">Provenance Event</a> is logged.</p>

<p>Additionally, a few &quot;<a href="#quot-off-chain-quot-vs-quot-on-chain-quot-data">off-chain</a>&quot;
properties are reset to their default values:</p>

<table><thead>
<tr>
<th>Property</th>
<th>Reset To</th>
</tr>
</thead><tbody>
<tr>
<td>isPrivate</td>
<td><code>true</code></td>
</tr>
<tr>
<td>isIgnored</td>
<td><code>false</code></td>
</tr>
<tr>
<td>isInGallery</td>
<td><code>false</code></td>
</tr>
<tr>
<td>approvedAddress</td>
<td><code>null</code></td>
</tr>
<tr>
<td>whitelistedAddresses</td>
<td><code>[]</code></td>
</tr>
<tr>
<td>isHistoricalProvenancePrivate</td>
<td><code>true</code></td>
</tr>
</tbody></table>

<aside class="notice">
  If for some reason your application chooses to transfer a Codex Record to an
  Ethereum smart contract, that contract <em>must</em> implement the
  <code>ERC721TokenReceiver</code> interface as defined in the
  <a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md" rel="noopener noreferrer">specification</a>.
  Otherwise, the transfer will fail because the contract cannot accept ERC-721
  tokens.
</aside>

<!--
@TODO: add these sections when CODX / fees are documented
## CODX Tokens & Fees
## ERC-721 Tokens
-->
<h1 id='response-examples'>Response Examples</h1>
<blockquote>
<p>An example success response (from a <a href="#get-client">Get Client</a> request):</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"error"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="s2">"result"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"gasAllowance"</span><span class="p">:</span> <span class="s2">"40500000"</span><span class="p">,</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"email@example.com"</span><span class="p">,</span>
    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"My Codex Application"</span><span class="p">,</span>
    <span class="s2">"address"</span><span class="p">:</span> <span class="s2">"0x627306090abab3a6e1400e9345bc60c78a8bef57"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<p>All responses from The Codex API will have the same structure, regardless
of whether or not the request was successful. The Codex API will <em>always</em>
return <code>Content-Type: application/json; charset=utf-8</code> response bodies with an
object containing the keys <code>error</code> and <code>result</code>, one of which will always be
<code>null</code>. Always returning a JSON body ensures you can always reliably parse
responses from The Codex API as JSON, even if there&#39;s an error.</p>

<p>If there was error, <code>result</code> will be <code>null</code> and the error details can be found
in the <code>error</code> object. The <code>error</code> object has two keys, <code>code</code> and <code>message</code>.
<code>error.code</code> will be the same as the HTTP status header on the response, and
<code>error.message</code> will provide an explanation of what went wrong.</p>

<p>Similarly, if the request was successful, <code>error</code> will be <code>null</code> and the
requested data can be found in the <code>response</code> object.</p>

<aside class="notice">
  Just about every object in response data will have <code>createdAt</code> and
  <code>updatedAt</code> <a href="https://en.wikipedia.org/wiki/ISO_8601" rel="noopener noreferrer">ISO 8601</a>
  timestamps. However, all examples in this section have had these values
  omitted for the sake of brevity.
</aside>

<blockquote>
<p>An example error response (expired access token):</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"error"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"code"</span><span class="p">:</span> <span class="mi">401</span><span class="p">,</span>
    <span class="s2">"message"</span><span class="p">:</span> <span class="s2">"Invalid token: access token has expired"</span>
  <span class="p">},</span>
  <span class="s2">"result"</span><span class="p">:</span> <span class="kc">null</span>
<span class="p">}</span>
</code></pre><h2 id='client'>Client</h2><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"gasAllowance"</span><span class="p">:</span> <span class="s2">"40500000"</span><span class="p">,</span>
  <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"email@example.com"</span><span class="p">,</span>
  <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"My Codex Application"</span><span class="p">,</span>
  <span class="s2">"gasAllowanceRemaining"</span><span class="p">:</span> <span class="s2">"28160450"</span><span class="p">,</span>
  <span class="s2">"address"</span><span class="p">:</span> <span class="s2">"0x627306090abab3a6e1400e9345bc60c78a8bef57"</span>
<span class="p">}</span>
</code></pre>
<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>String</td>
<td>The name of the application. This will be shown in the Codex Viewer as a registered application, taking the place of your application&#39;s Ethereum address in the Codex Record’s provenance.</td>
</tr>
<tr>
<td>email</td>
<td>String</td>
<td>The application developer’s email address. This will be used to communicate any breaking API changes or development updates.</td>
</tr>
<tr>
<td>address</td>
<td>String</td>
<td>The Ethereum address that identifies the application, provisioned and managed by Codex behalf of the application developer.</td>
</tr>
<tr>
<td>gasAllowance</td>
<td>String</td>
<td>The total amount of gas the application can spend until the gas allowance is reset (this is what <code>gasAllowanceRemaining</code> is reset to every period.) See <a href="#gas-allowance">Gas Allowance</a> for details.</td>
</tr>
<tr>
<td>gasAllowanceRemaining</td>
<td>String</td>
<td>The amount of gas left that the application can spend until it resets. See <a href="#gas-allowance">Gas Allowance</a> for details.</td>
</tr>
</tbody></table>
<h2 id='oauth2-access-token'>OAuth2 Access Token</h2><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"accessTokenExpiresAt"</span><span class="p">:</span> <span class="s2">"2018-10-02T22:36:57.808Z"</span><span class="p">,</span>
  <span class="s2">"accessToken"</span><span class="p">:</span> <span class="s2">"d49694e5a3459759cc7ac1741de246e184e51d6e"</span>
<span class="p">}</span>
</code></pre>
<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>accessTokenExpiresAt</td>
<td>Date</td>
<td>The date at which this access token will expire. See <a href="#access-token-expiration">Access Token Expiration</a> for details.</td>
</tr>
<tr>
<td>accessToken</td>
<td>String</td>
<td>The access token itself. This should be <a href="#making-authenticated-requests">added to the Authorization header</a> of all requests made to The Codex API.</td>
</tr>
</tbody></table>
<h2 id='codex-record'>Codex Record</h2><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"tokenId"</span><span class="p">:</span> <span class="s2">"0"</span><span class="p">,</span>
  <span class="s2">"isPrivate"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="s2">"isIgnored"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="s2">"isInGallery"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="s2">"providerId"</span><span class="p">:</span> <span class="s2">"codex"</span><span class="p">,</span>
  <span class="s2">"isHistoricalProvenancePrivate"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">"providerMetadataId"</span><span class="p">:</span> <span class="s2">"5bae56f75d7971becf854a72"</span><span class="p">,</span>
  <span class="s2">"ownerAddress"</span><span class="p">:</span> <span class="s2">"0x627306090abab3a6e1400e9345bc60c78a8bef57"</span><span class="p">,</span>
  <span class="s2">"approvedAddress"</span><span class="p">:</span> <span class="s2">"0x821aea9a577a9b44299b9c15c88cf3087f3b5544"</span><span class="p">,</span>
  <span class="s2">"nameHash"</span><span class="p">:</span> <span class="s2">"0x4955c7fd1cb2de006320e77b157409b84ab2df69d9c0720f609d7a17dd2a674c"</span><span class="p">,</span>
  <span class="s2">"descriptionHash"</span><span class="p">:</span> <span class="s2">"0xcb7ab38fbc9919a3b04eabc343d7e649335ad748213df20e65d1979d0d3aa800"</span><span class="p">,</span>
  <span class="s2">"whitelistedAddresses"</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">"0xf17f52151ebef6c7334fad080c5704d77216b732"</span><span class="p">,</span>
    <span class="s2">"0xc5fdf4076b8f3a5357c5e395ab970b5b54098fef"</span>
  <span class="p">],</span>
  <span class="s2">"fileHashes"</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">"0xb39e1bbc6d50670aafa88955217ddf1e9e1f635a2cfc8d5d806a730f014c7210"</span>
  <span class="p">],</span>
  <span class="s2">"provenance"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="c1">// see " Provenance Entry" below</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">"metadata"</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1">// see "File" below</span>
  <span class="p">},</span>
  <span class="s2">"provider"</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1">// see "Provider" below</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Permissions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tokenId</td>
<td>String</td>
<td>Public</td>
<td>The unique identifier of this Codex Record</td>
</tr>
<tr>
<td>metadata</td>
<td><a href="#metadata">Metadata</a></td>
<td>Whitelisted Addresses (if <code>isPrivate</code> is <code>true</code>)</td>
<td>Will be <code>undefined</code> if <code>isPrivate</code> is <code>true</code> and you are not the owner or a whitelisted address. See <a href="#metadata">Metadata</a> for details.</td>
</tr>
<tr>
<td>provider</td>
<td><a href="#metadata-provider">Metadata Provider</a></td>
<td>Public</td>
<td>See <a href="#metadata-provider">Metadata Provider</a> for details.</td>
</tr>
<tr>
<td>nameHash</td>
<td>String</td>
<td>Public</td>
<td>The hash of the metadata&#39;s plain text name.</td>
</tr>
<tr>
<td>isIgnored</td>
<td>Boolean</td>
<td>Public</td>
<td>This flag indicates that a user has chosen to &quot;ignore&quot; an incoming Codex Record transfer. This is useful to hide incoming transfers in a User Interface since there&#39;s no blockchain mechanism to explicitly reject a transfer.</td>
</tr>
<tr>
<td>isPrivate</td>
<td>Boolean</td>
<td>Public</td>
<td>This flag indicates that the metadata for this record is private and can only be retrieved by the owner, the <code>approvedAddress</code>, and the addresses listed in <code>whitelistedAddresses</code>.</td>
</tr>
<tr>
<td>provenance</td>
<td>Array[<a href="#provenance-event">Provenance Event</a>]</td>
<td>Public</td>
<td>An array of <a href="#provenance-event">Provenance Events</a>.</td>
</tr>
<tr>
<td>fileHashes</td>
<td>Array[String]</td>
<td>Public</td>
<td>An array of file hashes that belong to this Codex Record&#39;s metadata.</td>
</tr>
<tr>
<td>providerId</td>
<td>String</td>
<td>Public</td>
<td>See unique id of the <a href="#metadata-provider">Metadata Provider</a>.</td>
</tr>
<tr>
<td>ownerAddress</td>
<td>String</td>
<td>Public</td>
<td>The Ethereum address of the client / user that currently owns this Codex Record.</td>
</tr>
<tr>
<td>descriptionHash</td>
<td>String</td>
<td>Public</td>
<td>The hash of the metadata&#39;s plain text description.</td>
</tr>
<tr>
<td>approvedAddress</td>
<td>String</td>
<td>Public</td>
<td>The Ethereum address of the user currently approved to accept the transfer of this Codex Record. See <a href="#transferring-codex-records">Transferring a Codex Record</a> for details. Approved addresses are considered part of the <code>whitelistedAddresses</code> array. See <a href="#approved-addresses">Approved Addresses</a> for details.</td>
</tr>
<tr>
<td>providerMetadataId</td>
<td>String</td>
<td>Public</td>
<td>The unique ID of the metadata that belongs to this Codex Record.</td>
</tr>
<tr>
<td>whitelistedAddresses</td>
<td>Array[String]</td>
<td>Owner Only</td>
<td>An array of Ethereum addresses allowed to view private metadata for this Codex Record. This allows users to give people read-only access to their Codex Records. Will be <code>undefined</code> if you are not the owner. See <a href="#whitelisted-addresses">Whitelisted Addresses</a> for details.</td>
</tr>
<tr>
<td>isHistoricalProvenancePrivate</td>
<td>Boolean</td>
<td>Public</td>
<td>This flag indicates whether or not <a href="#historical-provenance">historical provenance</a> (i.e. <code>metadata.files</code>) should be hidden, regardless of the value of <code>isPrivate</code>.</td>
</tr>
</tbody></table>

<aside class="notice">
  <code>nameHash</code>, <code>descriptionHash</code>, and <code>fileHashes</code> can be used to verify the data sent from a metadata provider (e.g. The Codex API) matches the information on the blockchain, and therefore has not been tampered with.
</aside>
<h2 id='metadata'>Metadata</h2><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"codexRecordTokenId"</span><span class="p">:</span> <span class="s2">"0"</span><span class="p">,</span>
  <span class="s2">"hasPendingUpdates"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"5bae56f75d7971becf854a72"</span><span class="p">,</span>
  <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Really Cool Codex Record"</span><span class="p">,</span>
  <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"This is a really cool Codex Record!"</span><span class="p">,</span>
  <span class="s2">"creatorAddress"</span><span class="p">:</span> <span class="s2">"0x627306090abab3a6e1400e9345bc60c78a8bef57"</span><span class="p">,</span>
  <span class="s2">"nameHash"</span><span class="p">:</span> <span class="s2">"0x4955c7fd1cb2de006320e77b157409b84ab2df69d9c0720f609d7a17dd2a674c"</span><span class="p">,</span>
  <span class="s2">"descriptionHash"</span><span class="p">:</span> <span class="s2">"0xcb7ab38fbc9919a3b04eabc343d7e649335ad748213df20e65d1979d0d3aa800"</span><span class="p">,</span>
  <span class="s2">"fileHashes"</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">"0xb39e1bbc6d50670aafa88955217ddf1e9e1f635a2cfc8d5d806a730f014c7210"</span>
  <span class="p">],</span>
  <span class="s2">"pendingUpdates"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="c1">// see "Pending Update" below</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">"mainImage"</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1">// see "File" below</span>
  <span class="p">},</span>
  <span class="s2">"files"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="c1">// see "File" below</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">"images"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="c1">// see "File" below</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre>
<p>Metadata makes up all of the &quot;<a href="#quot-off-chain-quot-vs-quot-on-chain-quot-data">off-chain</a>&quot;
data associated with a Codex Record, e.g. the &quot;plain text&quot; values for the
corresponding hashes stored on the blockchain. Storing this (potentially)
sensitive data off-chain is necessary for privacy controls, since the nature of
blockchain transactions are public.</p>

<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Permissions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Public</td>
<td>The unique ID of the metadata.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>Whitelisted Addresses (if <code>isPrivate</code> is <code>true</code>)</td>
<td>The plain text name of the Codex Record. Will be <code>undefined</code> if <code>isPrivate</code> is <code>true</code> and you are not the owner or a whitelisted address.</td>
</tr>
<tr>
<td>files</td>
<td>Array[<a href="#file">File</a>]</td>
<td>Whitelisted Addresses (if <code>isPrivate</code> is <code>true</code> and <code>isHistoricalProvenancePrivate</code> is <code>false</code>)</td>
<td>An array of supplemental files that belong to this metadata. This is considered the &quot;<a href="#historical-provenance">historical provenance</a>&quot;. Can <code>undefined</code> if <code>isHistoricalProvenancePrivate</code> is <code>true</code> on the Codex Record. See <a href="#file">File</a> for details.</td>
</tr>
<tr>
<td>images</td>
<td>Array[<a href="#file">File</a>]</td>
<td>Whitelisted Addresses (if <code>isPrivate</code> is <code>true</code>)</td>
<td>An array of supplemental images that belong to this metadata. Will be <code>undefined</code> if <code>isPrivate</code> is <code>true</code> and you are not the owner or a whitelisted address. See <a href="#file">File</a> for details.</td>
</tr>
<tr>
<td>nameHash</td>
<td>String</td>
<td>Public</td>
<td>The hash of the plain text name.</td>
</tr>
<tr>
<td>mainImage</td>
<td><a href="#file">File</a></td>
<td>Whitelisted Addresses (if <code>isPrivate</code> is <code>true</code>)</td>
<td>The main image of this Codex Record. Will be <code>undefined</code> if <code>isPrivate</code> is <code>true</code> and you are not the owner or a whitelisted address.</td>
</tr>
<tr>
<td>fileHashes</td>
<td>Array[String]</td>
<td>Public</td>
<td>An array of file hashes that belong to this metadata.</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>Whitelisted Addresses (if <code>isPrivate</code> is <code>true</code>)</td>
<td>The plain text description of the Codex Record. Will be <code>undefined</code> if <code>isPrivate</code> is <code>true</code> and you are not the owner or a whitelisted address.</td>
</tr>
<tr>
<td>pendingUpdates</td>
<td>Array[<a href="#pending-update">Pending Update</a>]</td>
<td>Owner Only</td>
<td>An array of updates that are currently being processed for this metadata. See <a href="#pending-update">Pending Update</a> for details. Will be <code>undefined</code> if you are not the owner.</td>
</tr>
<tr>
<td>creatorAddress</td>
<td>String</td>
<td>Public</td>
<td>The Ethereum address of the client / user who created this metadata (not necessarily the current Codex Record owner!)</td>
</tr>
<tr>
<td>descriptionHash</td>
<td>String</td>
<td>Public</td>
<td>The hash of the plain text description.</td>
</tr>
<tr>
<td>hasPendingUpdates</td>
<td>Boolean</td>
<td>Public</td>
<td>This flag is true if there is currently a &quot;modify&quot; transaction processing on the blockchain (e.g. after <a href="#modify-a-codex-record-39-s-metadata">modifying a Codex Record&#39;s metadata</a>). This is useful for showing some sort of loading state on a Codex Record while modifications are pending. See <a href="#pending-update">Pending Update</a> for details.</td>
</tr>
<tr>
<td>codexRecordTokenId</td>
<td>String</td>
<td>Public</td>
<td>The <code>tokenId</code> of the Codex Record this metadata belongs to.</td>
</tr>
</tbody></table>
<h2 id='pending-update'>Pending Update</h2><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"5bb661ab92d258fdf2efa29b"</span><span class="p">,</span>
  <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Super Duper New Title"</span><span class="p">,</span>
  <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"This will replace the current description!"</span><span class="p">,</span>
  <span class="s2">"nameHash"</span><span class="p">:</span> <span class="s2">"0x444df25b54a53b842bb2af218e79e8cd2f1efca5c8f7a439451686fb3b825636"</span><span class="p">,</span>
  <span class="s2">"descriptionHash"</span><span class="p">:</span> <span class="s2">"0xcb7ab38fbc9919a3b04eabc343d7e649335ad748213df20e65d1979d0d3aa800"</span><span class="p">,</span>
  <span class="s2">"fileHashes"</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">"0xd7bbfd8fd047f48c6724adb0633059f00f55339ed2fc96a529ef606d6ec76593"</span>
  <span class="p">],</span>
  <span class="s2">"mainImage"</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1">// see "File" below</span>
  <span class="p">},</span>
  <span class="s2">"files"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="c1">// see "File" below</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">"images"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="c1">// see "File" below</span>
    <span class="p">}</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre>
<p>Typically generated after <a href="#modify-a-codex-record-39-s-metadata">modifying a Codex Record&#39;s metadata</a>,
a Pending Update represents the new state metadata should have after a &quot;modify&quot;
transaction has been mined on the blockchain. This process is necessary due to
the asynchronous nature of blockchain transactions.</p>

<aside class="success">
  Since a Pending Update is essentially a "placeholder" for a Codex Record's
  metadata, the structure is essentially the same.
</aside>

<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>The unique ID of the pending update.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>The new plain text name.</td>
</tr>
<tr>
<td>files</td>
<td>Array[<a href="#file">File</a>]</td>
<td>The new array of supplemental files.</td>
</tr>
<tr>
<td>images</td>
<td>Array[<a href="#file">File</a>]</td>
<td>The new array of supplemental images.</td>
</tr>
<tr>
<td>nameHash</td>
<td>String</td>
<td>The hash of the new plain text name.</td>
</tr>
<tr>
<td>mainImage</td>
<td><a href="#file">File</a></td>
<td>The new main image.</td>
</tr>
<tr>
<td>fileHashes</td>
<td>Array[String]</td>
<td>An array of file hashes representing all the new files &amp; images.</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>The new plain text description.</td>
</tr>
<tr>
<td>descriptionHash</td>
<td>String</td>
<td>The hash of the new plain text description.</td>
</tr>
</tbody></table>
<h2 id='provenance-event'>Provenance Event</h2><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"transferred"</span><span class="p">,</span>
  <span class="s2">"oldOwnerAddress"</span><span class="p">:</span> <span class="s2">"0x627306090abab3a6e1400e9345bc60c78a8bef57"</span><span class="p">,</span>
  <span class="s2">"newOwnerAddress"</span><span class="p">:</span> <span class="s2">"0xf17f52151ebef6c7334fad080c5704d77216b732"</span><span class="p">,</span>
  <span class="s2">"transactionHash"</span><span class="p">:</span> <span class="s2">"0x0a3a518d1a0786cbdc6265dc24fc0112411c996363465a2789dc3d8021cd4c44"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre>
<p>A Provenance Event is a record of a blockchain transaction related to a specific
Codex Record. A Codex Record&#39;s <code>provenance</code> array is essentially a transaction
ledger, detailing when it was created, who it was transferred to, and who
modified what data.</p>

<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>String</td>
<td>One of <code>[&#39;created&#39;, &#39;modified&#39;, &#39;transferred&#39;]</code>.</td>
</tr>
<tr>
<td>oldOwnerAddress</td>
<td>String</td>
<td>The Ethereum address of the owner before this transaction occurred. For <code>created</code> events, this will be the &quot;zero address&quot; (a special address that nobody can own, used as a &quot;null value&quot; for address-type variables.) For <code>modified</code> events, this will be the same as <code>newOwnerAddress</code>.</td>
</tr>
<tr>
<td>newOwnerAddress</td>
<td>String</td>
<td>The Ethereum address of the after before this transaction occurred. For <code>modified</code> events, this will be the same as <code>oldOwnerAddress</code>.</td>
</tr>
<tr>
<td>transactionHash</td>
<td>String</td>
<td>The Ethereum transaction hash of the transaction that emitted this event.</td>
</tr>
</tbody></table>
<h2 id='metadata-provider'>Metadata Provider</h2><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"codex"</span><span class="p">,</span>
  <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"The Codex API"</span><span class="p">,</span>
  <span class="s2">"metadataUrl"</span><span class="p">:</span> <span class="s2">"https://rinkeby-api.codexprotocol.com/v1/records/"</span>
<span class="p">}</span>
</code></pre>
<p>A Metadata Provider is known source of Codex Record metadata. Since metadata
<em>must</em> be stored &quot;<a href="#quot-off-chain-quot-vs-quot-on-chain-quot-data">off-chain</a>&quot;,
Metadata Providers are essentially databases / API endpoints which can be used
to retrieve Codex Record metadata.</p>

<aside class="success">
  Currently Codex Protocol is the only metadata provider, but this functionality
  has been implemented to support the possibility of having third-party metadata
  hosts in the future.
</aside>

<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>The unique ID of the metadata provider.</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>A description of the metadata provider.</td>
</tr>
<tr>
<td>metadataUrl</td>
<td>String</td>
<td>The URL to request Codex Record Metadata from. The Codex Record&#39;s <code>tokenId</code> should be appended to this URL to retrieve metadata about that record.</td>
</tr>
</tbody></table>
<h2 id='file'>File</h2><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"width"</span><span class="p">:</span> <span class="s2">"1024"</span><span class="p">,</span>
  <span class="s2">"size"</span><span class="p">:</span> <span class="s2">"181516"</span><span class="p">,</span>
  <span class="s2">"height"</span><span class="p">:</span> <span class="s2">"1024"</span><span class="p">,</span>
  <span class="s2">"fileType"</span><span class="p">:</span> <span class="s2">"image"</span><span class="p">,</span>
  <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"cool-file.jpg"</span><span class="p">,</span>
  <span class="s2">"mimeType"</span><span class="p">:</span> <span class="s2">"image/jpeg"</span><span class="p">,</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"5bae56f65d7971becf854a71"</span><span class="p">,</span>
  <span class="s2">"creatorAddress"</span><span class="p">:</span> <span class="s2">"0x627306090abab3a6e1400e9345bc60c78a8bef57"</span><span class="p">,</span>
  <span class="s2">"hash"</span><span class="p">:</span> <span class="s2">"0xb39e1bbc6d50670aafa88955217ddf1e9e1f635a2cfc8d5d806a730f014c7210"</span><span class="p">,</span>
  <span class="s2">"uri"</span><span class="p">:</span> <span class="s2">"https://s3.amazonaws.com/codex.registry/files/1538152180696.c8a9ec69-0ed8-4516-a34c-e15ebbe4749c.jpg"</span>
<span class="p">}</span>
</code></pre>
<p>When files are uploaded to The Codex API, they are processed to determine
useful bits of information such as width, height, and size (in bytes). The are
then uploaded to <a href="https://aws.amazon.com/s3/">S3</a>, and the resulting information
is stored in the The Codex API database.</p>

<table><thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>The unique ID of the file.</td>
</tr>
<tr>
<td>uri</td>
<td>String</td>
<td>The URL of the file.</td>
</tr>
<tr>
<td>size</td>
<td>String</td>
<td>The size (in bytes) of the file.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>The name of the file, as passed in <a href="#create-a-codex-record">when created</a>.</td>
</tr>
<tr>
<td>hash</td>
<td>String</td>
<td>The hash of the file data.</td>
</tr>
<tr>
<td>width</td>
<td>String</td>
<td>The width (in pixels) of the file, if it is an image. Otherwise <code>null</code>.</td>
</tr>
<tr>
<td>height</td>
<td>String</td>
<td>The height (in pixels) of the file, if it is an image. Otherwise <code>null</code>.</td>
</tr>
<tr>
<td>fileType</td>
<td>String</td>
<td>One of <code>[&#39;file&#39;, &#39;video&#39;, or &#39;document&#39;]</code>. Useful when displaying this file on a web page.</td>
</tr>
<tr>
<td>mimeType</td>
<td>String</td>
<td>The <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types">MIME type</a> of the file.</td>
</tr>
<tr>
<td>creatorAddress</td>
<td>String</td>
<td>The Ethereum address of the client / user created this file (not necessarily the current Codex Record owner!)</td>
</tr>
</tbody></table>

<aside class="notice">
  Your application will likely only ever use the <code>fileType</code> and
  <code>uri</code> fields.
</aside>
<h1 id='errors'>Errors</h1>
<p>The Codex API can return the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Error Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized Error - Your access token is invalid (e.g. it has expired and you need to request a new one.)</td>
</tr>
<tr>
<td>402</td>
<td>Payment Required Error - You do not have enough <a href="#gas-allowance">gas allowance</a> to perform the requested action. Wait for your allowance to reset, or purchase more allowance.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden Error - Your access token is valid, but you do not have permission to perform the request action (e.g. &quot;admin only&quot; actions.)</td>
</tr>
<tr>
<td>404</td>
<td>Not Found Error - The requested resource (or route) does not exist.</td>
</tr>
<tr>
<td>409</td>
<td>Missing Parameter Error - A required parameter was not specified in the request data. See error message for details.</td>
</tr>
<tr>
<td>409</td>
<td>Invalid Argument Error - An invalid parameter was specified in the request data (e.g. an invalid email address), or the requested action can not be performed (e.g. cancelling a transfer that hasn&#39;t been initiated yet.) See error message for details.</td>
</tr>
<tr>
<td>409</td>
<td>Conflict Error - The requested resource could not be created because a record with a matching unique identifier already exists. See error message for details.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error - There was an unknown problem processing the request. Please try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable - We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>
<h1 id='blockchain-details'>Blockchain Details</h1>
<p>This section contains details about the blockchain specifics of Codex Protocol.
It&#39;s geared towards developers who are building blockchain-based applications
that interface directly with our smart contracts, or who are building NFT
wallets and want to correctly display Codex Records.</p>
<h2 id='smart-contract-addresses'>Smart Contract Addresses</h2>
<p>The following table lists the contracts for each environment we deploy to. Click
a link to check out that contract on Etherscan.</p>

<table><thead>
<tr>
<th>Ropsten</th>
<th>Rinkeby</th>
<th>Mainnet</th>
</tr>
</thead><tbody>
<tr>
<td><a href="https://ropsten.etherscan.io/token/0x2af5409438d2e6c241015f3130213f6a122b4064">CodexCoin</a></td>
<td><a href="https://rinkeby.etherscan.io/address/0x6a8c5db1495ffc4ef183dfccfdc4de5164b4e95c">CodexCoin</a></td>
<td><a href="https://etherscan.io/token/0xf226e38c3007b3d974fc79bcf5a77750035436ee">CodexCoin</a></td>
</tr>
<tr>
<td><a href="https://ropsten.etherscan.io/address/0xd8d4c451472727309b123850cbe2f9852163e8a4">CodexRecord</a></td>
<td><a href="https://rinkeby.etherscan.io/address/0xcd3dd2dabc7c658c1abcfe8e8a63574447985b5d">CodexRecord</a></td>
<td><a href="https://etherscan.io/address/0x2c00a92a9c5c919a1a4b5a8ee6bc520f61dbe421">CodexRecord</a></td>
</tr>
<tr>
<td><a href="https://ropsten.etherscan.io/address/0x714cd5d6425ef198768d504edf190b5aa5b44334">CodexRecordProxy</a></td>
<td><a href="https://rinkeby.etherscan.io/address/0xa3fb132c4622db86bbf39cf5e6301d8a2a1145a8">CodexRecordProxy</a></td>
<td><a href="https://etherscan.io/address/0x8853b05833029e3cf8d3cbb592f9784fa43d2a79">CodexRecordProxy</a></td>
</tr>
<tr>
<td><a href="https://ropsten.etherscan.io/address/0x0bb7d24b10768431b5b7bda9afde822ca2ff3ad6">CodexStakeContract</a></td>
<td><a href="https://rinkeby.etherscan.io/address/0x2bbcae1335a97e440c7d9f3f638db26abfad3207">CodexStakeContract</a></td>
<td><a href="https://etherscan.io/address/0xdea454c9c4ad408f324cc0ea382b2b7aad99640c">CodexStakeContract</a></td>
</tr>
<tr>
<td><a href="https://ropsten.etherscan.io/address/0xbb295f65335caef0cbe0e31a24466a01004a8067">IdentityPlatform</a></td>
<td><a href="https://rinkeby.etherscan.io/address/0x7293bae565cb2d78eb8e0600e6da7397823edfdc">IdentityPlatform</a></td>
<td>N/A</td>
</tr>
</tbody></table>

<aside class="warning">
  The Rinkeby &amp; Ropsten addresses are subject to change, but the Mainnet
  addresses will never change.
</aside>
<h2 id='get-erc-721-token-metadata'>Get ERC-721 Token Metadata</h2>
<blockquote>
<p>Get a token&#39;s metadata for display in an Ethereum wallet with NFT support:</p>
</blockquote>
<pre class="highlight javascript tab-javascript"><code><span class="kr">import</span> <span class="nx">request</span> <span class="nx">from</span> <span class="s1">'request'</span>

<span class="kr">const</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://rinkeby-api.codexprotocol.com/token-metadata/0'</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'get'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">}</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">body</span><span class="p">)</span> <span class="c1">// ERC-721 Metadata JSON for Codex Record with tokenId 0</span>
<span class="p">})</span>
</code></pre>
<blockquote>
<p>The above API call returns <a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md">ERC-721 Metadata JSON</a>, e.g.</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Really Cool Codex Record"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is a really cool Codex Record!"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/codex.registry/files/1538152180696.c8a9ec69-0ed8-4516-a34c-e15ebbe4749c.jpg"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Our smart contract implements the optional ERC-721 metadata extension, which
defines a unique tokenURI for each token in the registry. Since token metadata
is dynamic, the tokenURIs point to an endpoint in our API instead of a static
file on IPFS.</p>

<aside class="warning">
  This endpoint is specifically for developers building Ethereum wallets with
  NFT support and <strong>should not be used by OAuth2 clients</strong>.
</aside>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /token-metadata/:tokenId</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tokenId</td>
<td>Number</td>
<td>The <code>tokenId</code> of the Codex Record for which to retrieve the metadata of.</td>
</tr>
</tbody></table>

<aside class="success">
  This endpoint does not wrap the response in the normal
  <code>{ error, response }</code> object, as described in
  <a href="#response-examples">Response Examples</a>. Instead, this endpoint
  returns <em>ERC-721 Metadata JSON</em> as described in the
  <a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md" rel="noopener noreferrer">ERC-721 specification</a>.
</aside>

<aside class="notice">
  If the Codex Record is private, then generic placeholder information will be
  returned instead of actual metadata.
</aside>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-112435828-7"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-112435828-7');
  </script>
</html>
